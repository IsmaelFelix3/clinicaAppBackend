"use strict";(self.webpackChunkcliniva=self.webpackChunkcliniva||[]).push([[12],{3012:(Ye,T,l)=>{l.r(T),l.d(T,{AccessLogModule:()=>ye});var d=l(6814),r=l(6223),E=l(5531),U=l(1858),p=l(1896),N=l(8337),L=l(1476),f=l(3566),m=l(5313),B=l(2589),q=l(2438),D=l(3519),g=l.n(D),e=l(5879),F=l(9862),I=l(9347),h=l(1744),O=l(2939),_=l(2296),y=l(617),v=l(3680),Y=l(2596),J=l(9177),Z=l(4414);const S=["filter"];function Q(t,a){1&t&&e._UZ(0,"mat-header-cell",49),2&t&&e.Q6J("ngClass","tbl-col-width-per-6")}function M(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Tipo"),e.qZA())}function w(t,a){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.xp6(1),e.Oqu(o.tipo_ingreso)}}function k(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Nombre"),e.qZA())}function V(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Nombre:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.nombre_ingreso," ")}}function R(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Acompa\xf1ante"),e.qZA())}function P(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Acompa\xf1ante:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.nombre_acompanante," ")}}function j(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Motivo"),e.qZA())}function G(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Motivo:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.motivo_ingreso," ")}}function $(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Medico"),e.qZA())}function H(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Medico:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",0===o.medico?"N/A":o.Medico.apellidos+" "+o.Medico.nombre," ")}}function z(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Fecha"),e.qZA())}function X(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Fecha:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.fecha," ")}}function K(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Entrada"),e.qZA())}function W(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Entrada:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.hora_entrada," ")}}function ee(t,a){1&t&&(e.TgZ(0,"mat-header-cell",50),e._uU(1,"Salida"),e.qZA())}function te(t,a){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",51),e._uU(2,"Salida:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=a.$implicit;e.xp6(3),e.hij(" ",o.hora_salida," ")}}function oe(t,a){1&t&&(e.TgZ(0,"mat-header-cell",52),e._uU(1,"Acciones"),e.qZA())}function ie(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"mat-cell",52)(1,"button",53),e.NdJ("click",function(i){return i.stopPropagation()})("click",function(){const c=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.editCall(c))}),e._UZ(2,"app-feather-icons",54),e.qZA(),e.TgZ(3,"button",55),e.NdJ("click",function(i){return i.stopPropagation()})("click",function(){const c=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.deleteItem(c))}),e._UZ(4,"app-feather-icons",54),e.qZA()()}2&t&&(e.xp6(2),e.Tol("tbl-fav-edit"),e.Q6J("icon","edit"),e.xp6(2),e.Tol("tbl-fav-delete"),e.Q6J("icon","trash-2"))}function ae(t,a){1&t&&e._UZ(0,"mat-header-row")}function ne(t,a){1&t&&e._UZ(0,"mat-row",56),2&t&&e.Udp("cursor","pointer")}const re=function(){return[5,10,25,100]};let b=(()=>{class t extends B.n{constructor(o,n,i,c,s){super(),this.httpClient=o,this.dialog=n,this.buildingLogService=i,this.snackBar=c,this.router=s,this.displayedColumns=["type","name","companion","motive","medic","date","entrance","exit","actions"],this.dataSource=new m.by,this.records=[],this.selection=new N.Ov(!0,[]),this.dataLength=0}ngOnInit(){this.loadData()}refresh(){this.loadData()}addNew(){let o;o="true"===localStorage.getItem("isRtl")?"rtl":"ltr",this.router.navigateByUrl("admin/accessLog/addBuildingLog")}editCall(o){console.log(o),this.router.navigateByUrl("admin/accessLog/editBuildingLog",{state:{id:o.id}})}deleteItem(o){this.id=o.id,console.log(o),g().fire({title:"\xbfDesea eliminar este registro?",text:"No podras revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar"}).then(n=>{n.isConfirmed&&this.buildingLogService.deleteBuildingLog(this.id).subscribe({next:i=>{this.showNotification("snackbar-success","Registro Eliminado Exitosamente...!!!","top","end")},complete:()=>{this.refresh()},error:i=>{g().fire({icon:"error",title:"Error al eliminar el registro",text:i.msg}),this.loadData()}})})}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}loadData(){this.buildingLogService.getRecords().subscribe({complete:()=>{},next:o=>{console.log(o),this.records=o.registros.rows,this.dataSource=new m.by(this.records),this.dataSource.paginator=this.paginator,this.dataLength=this.records.length},error:o=>{}}),this.subs.sink=(0,q.R)(this.filter?.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter?.nativeElement.value)})}showNotification(o,n,i,c){this.snackBar.open(n,"",{duration:2e3,verticalPosition:i,horizontalPosition:c,panelClass:o})}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(F.eN),e.Y36(I.uw),e.Y36(h.M),e.Y36(O.ux),e.Y36(p.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-building-log"]],viewQuery:function(n,i){if(1&n&&(e.Gf(L.NW,7),e.Gf(f.YE,7),e.Gf(S,7)),2&n){let c;e.iGM(c=e.CRH())&&(i.paginator=c.first),e.iGM(c=e.CRH())&&(i.sort=c.first),e.iGM(c=e.CRH())&&(i.filter=c.first)}},features:[e.qOj],decls:72,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["id","search-input","placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],[1,"export-button","m-l-10","image-upload"],["for","uploadBtn"],["src","assets/images/icons/xlsx.png","matTooltip","Exportar"],["matTooltip","Agregar",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","REFRESH",1,"m-l-10"],[1,"body","overflow-auto"],[1,"responsive_table"],["matSort","",1,"mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","companion"],["matColumnDef","motive"],["matColumnDef","medic"],["matColumnDef","date"],["matColumnDef","entrance"],["matColumnDef","exit"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"ngClass"],["mat-sort-header",""],[1,"mobile-label"],[1,"pr-0"],["matTooltip","Editar","mat-icon-button","",1,"tbl-action-btn",3,"click"],[3,"icon"],["matTooltip","Eliminar","mat-icon-button","",1,"tbl-action-btn",3,"click"],["matRipple",""]],template:function(n,i){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),e._uU(12,"Listado"),e.qZA()(),e.TgZ(13,"li",11)(14,"label",12)(15,"i",13),e._uU(16,"search"),e.qZA()(),e._UZ(17,"input",14,15),e.qZA()()(),e.TgZ(19,"div",16)(20,"ul",17)(21,"li",18)(22,"div",19)(23,"label",20),e._UZ(24,"img",21),e.qZA()()(),e.TgZ(25,"li",18)(26,"div",22)(27,"button",23),e.NdJ("click",function(){return i.addNew()}),e.TgZ(28,"mat-icon",24),e._uU(29,"add"),e.qZA()()()(),e.TgZ(30,"li",18)(31,"div",25)(32,"button",23),e.NdJ("click",function(){return i.refresh()}),e.TgZ(33,"mat-icon",24),e._uU(34,"refresh"),e.qZA()()()()()()(),e.TgZ(35,"div",26)(36,"div",27)(37,"mat-table",28,29),e.ynx(39,30),e.YNc(40,Q,1,1,"mat-header-cell",31),e.BQk(),e.ynx(41,32),e.YNc(42,M,2,0,"mat-header-cell",33),e.YNc(43,w,2,1,"mat-cell",34),e.BQk(),e.ynx(44,35),e.YNc(45,k,2,0,"mat-header-cell",33),e.YNc(46,V,4,1,"mat-cell",34),e.BQk(),e.ynx(47,36),e.YNc(48,R,2,0,"mat-header-cell",33),e.YNc(49,P,4,1,"mat-cell",34),e.BQk(),e.ynx(50,37),e.YNc(51,j,2,0,"mat-header-cell",33),e.YNc(52,G,4,1,"mat-cell",34),e.BQk(),e.ynx(53,38),e.YNc(54,$,2,0,"mat-header-cell",33),e.YNc(55,H,4,1,"mat-cell",34),e.BQk(),e.ynx(56,39),e.YNc(57,z,2,0,"mat-header-cell",33),e.YNc(58,X,4,1,"mat-cell",34),e.BQk(),e.ynx(59,40),e.YNc(60,K,2,0,"mat-header-cell",33),e.YNc(61,W,4,1,"mat-cell",34),e.BQk(),e.ynx(62,41),e.YNc(63,ee,2,0,"mat-header-cell",33),e.YNc(64,te,4,1,"mat-cell",34),e.BQk(),e.ynx(65,42),e.YNc(66,oe,2,0,"mat-header-cell",43),e.YNc(67,ie,5,6,"mat-cell",44),e.BQk(),e.YNc(68,ae,1,0,"mat-header-row",45),e.YNc(69,ne,1,2,"mat-row",46),e.qZA(),e._UZ(70,"mat-paginator",47,48),e.qZA()()()()()()()),2&n&&(e.xp6(3),e.Q6J("title","Bitacora")("active_item","Listado"),e.xp6(34),e.Q6J("dataSource",i.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("length",i.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(9,re)))},dependencies:[d.mk,_.RK,_.nh,y.Hw,L.NW,v.wG,f.YE,f.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,Y.gM,J.A,Z.L]})}return t})();var A=l(8656),u=l(4170),C=l(2032),x=l(8525);function le(t,a){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function ce(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el tipo de ingreso"))}function se(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre"))}function me(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del acompa\xf1ante"))}function de(t,a){if(1&t&&(e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Acompa\xf1ante"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,me,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("nombre_acompanante"))}}function ge(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el motivo de ingreso"))}function ue(t,a){if(1&t&&(e.TgZ(0,"div",27)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Motivo"),e.qZA(),e._UZ(4,"input",28),e.YNc(5,ge,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("motivo_ingreso"))}}function pe(t,a){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.Q6J("value",o.id_medico),e.xp6(1),e.hij(" ",o.apellidos+" "+o.nombre," ")}}function _e(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del banco"))}function fe(t,a){if(1&t&&(e.TgZ(0,"div",29)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Medico"),e.qZA(),e.TgZ(4,"mat-select",30),e.YNc(5,pe,2,2,"mat-option",14),e.qZA(),e.YNc(6,_e,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.doctors),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("medico"))}}function he(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de entrada"))}const ve=function(){return[]};function Te(t,a){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function Le(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el tipo de ingreso"))}function be(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre"))}function Ae(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del acompa\xf1ante"))}function Ce(t,a){if(1&t&&(e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Acompa\xf1ante"),e.qZA(),e._UZ(4,"input",27),e.YNc(5,Ae,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("nombre_acompanante"))}}function xe(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el motivo de ingreso"))}function Ee(t,a){if(1&t&&(e.TgZ(0,"div",28)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Motivo"),e.qZA(),e._UZ(4,"input",29),e.YNc(5,xe,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("motivo_ingreso"))}}function Ue(t,a){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.Q6J("value",o.id_medico),e.xp6(1),e.hij(" ",o.apellidos+" "+o.nombre," ")}}function Ne(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del banco"))}function Be(t,a){if(1&t&&(e.TgZ(0,"div",30)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Medico"),e.qZA(),e.TgZ(4,"mat-select",31),e.YNc(5,Ue,2,2,"mat-option",14),e.qZA(),e.YNc(6,Ne,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.doctors),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("medico"))}}function qe(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de entrada"))}function De(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de salida"))}const Fe=function(){return[]},Ie=[{path:"buildingLog",component:b},{path:"addBuildingLog",component:(()=>{class t{constructor(o,n,i,c){this.fb=o,this.router=n,this.buildingLogService=i,this.doctorService=c,this.types=["EMPLEADO","PACIENTE","MEDICO CONSULTA","ANESTESIOLOGO","MEDICO AYUDANTE","REPRESENTANTE MEDICO","TRABAJADOR EXTERNO","VISITA PERSONAL"],this.doctors=[],this.isEmpleado=!1,this.accessLogForm=this.fb.group({tipo_ingreso:[,[r.kI.required]],nombre_ingreso:[,[r.kI.required]],nombre_acompanante:[,[]],motivo_ingreso:[,[r.kI.required]],medico:[,[r.kI.required]],fecha:[,r.kI.required],hora_entrada:[,[r.kI.required]],hora_salida:[,[]]})}ngOnInit(){this.doctorService.getAllDoctorss().subscribe(o=>{this.doctors=o.medicos})}campoEsValido(o){return this.accessLogForm.controls[o].errors&&this.accessLogForm.controls[o].touched}getType(){console.log("entro"),console.log(this.accessLogForm.value.tipo_ingreso),this.isEmpleado=!1,("EMPLEADO"===this.accessLogForm.value.tipo_ingreso||"MEDICO CONSULTA"===this.accessLogForm.value.tipo_ingreso)&&(this.isEmpleado=!0),console.log(this.isEmpleado)}addProcedure(){"EMPLEADO"===this.accessLogForm.get("tipo_ingreso")?.value||"MEDICO CONSULTA"===this.accessLogForm.value.tipo_ingreso?(this.accessLogForm.get("nombre_acompanante")?.setValue("N/A"),this.accessLogForm.get("motivo_ingreso")?.setValue("N/A"),this.accessLogForm.get("medico")?.setValue(0)):(this.accessLogForm.get("nombre_acompanante")?.setValue(this.accessLogForm.value.nombre_acompanante.toUpperCase()),this.accessLogForm.get("motivo_ingreso")?.setValue(this.accessLogForm.value.motivo_ingreso.toUpperCase()));const o=(new Date).getDate(),n=(new Date).getMonth(),i=(new Date).getFullYear(),c=new Date(i,n,o);this.accessLogForm.get("nombre_ingreso")?.setValue(this.accessLogForm.value.nombre_ingreso.toUpperCase()),this.accessLogForm.get("fecha")?.setValue(c),console.log(this.accessLogForm.value),this.buildingLogService.addBuildingLog(this.accessLogForm.value).subscribe({complete:()=>{this.router.navigateByUrl("admin/accessLog/buildingLog")},next:s=>{console.log(s),g().fire({icon:"success",title:"Registro se guardo correctamente"})},error:s=>{g().fire({icon:"error",title:"Error al guardar el Registro",text:s.msg})}})}return(){this.router.navigateByUrl("admin/accessLog/buildingLog")}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(p.F0),e.Y36(h.M),e.Y36(A.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-building-log"]],decls:42,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"mx-4",3,"formGroup"],[1,"row"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","tipo_ingreso","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre_ingreso","required","",1,"uppercase"],["class","col-xl-5 col-lg-5 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-3 col-lg-3 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-4 col-lg-4 col-md-12 col-sm-12",4,"ngIf"],["matInput","","formControlName","hora_entrada","required",""],["mat-raised-button","","color","primary",1,"btn-space",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"],[3,"value"],["matInput","","formControlName","nombre_acompanante","required","",1,"uppercase"],[1,"col-xl-3","col-lg-3","col-md-12","col-sm-12"],["matInput","","formControlName","motivo_ingreso","required","",1,"uppercase"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12"],["formControlName","medico","required",""]],template:function(n,i){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),e._uU(9,"Nuevo registro"),e.qZA()(),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tipo Ingreso"),e.qZA(),e.TgZ(17,"mat-select",13),e.NdJ("selectionChange",function(){return i.getType()}),e.YNc(18,le,2,2,"mat-option",14),e.qZA(),e.YNc(19,ce,2,1,"mat-error",15),e.qZA()(),e.TgZ(20,"div",16)(21,"mat-form-field",17)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",18),e.YNc(25,se,2,1,"mat-error",15),e.qZA()(),e.YNc(26,de,6,1,"div",19),e.qZA(),e.TgZ(27,"div",10),e.YNc(28,ue,6,1,"div",20),e.YNc(29,fe,7,2,"div",21),e.TgZ(30,"div",11)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Entrada (Ejemplo: 12:00)"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,he,2,1,"mat-error",15),e.qZA()()(),e.TgZ(36,"div",10)(37,"div",5)(38,"button",23),e.NdJ("click",function(){return i.addProcedure()}),e._uU(39,"Guardar"),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return i.return()}),e._uU(41,"Cancel"),e.qZA()()()()()()()()()()),2&n&&(e.xp6(3),e.Q6J("title","Bitacora")("items",e.DdM(11,ve))("active_item","Nuevo registro"),e.xp6(8),e.Q6J("formGroup",i.accessLogForm),e.xp6(7),e.Q6J("ngForOf",i.types),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("tipo_ingreso")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("nombre_ingreso")),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(2),e.Q6J("ngIf",!i.isEmpleado),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_entrada")))},dependencies:[d.sg,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,v.ey,_.lW,u.KE,u.hX,u.TO,C.Nt,x.gD,Z.L]})}return t})()},{path:"editBuildingLog",component:(()=>{class t{constructor(o,n,i,c){this.fb=o,this.router=n,this.buildingLogService=i,this.doctorService=c,this.types=["EMPLEADO","PACIENTE","MEDICO CONSULTA","ANESTESIOLOGO","MEDICO AYUDANTE","REPRESENTANTE MEDICO","TRABAJADOR EXTERNO","VISITA PERSONAL"],this.doctors=[],this.isEmpleado=!1,this.state={},this.id=0,this.accessLogForm=this.fb.group({id:[],tipo_ingreso:[,[r.kI.required]],nombre_ingreso:[,[r.kI.required]],nombre_acompanante:[,[r.kI.required]],motivo_ingreso:[,[r.kI.required]],medico:[,[r.kI.required]],hora_entrada:[,[r.kI.required]],hora_salida:[,[r.kI.required]]}),this.state=this.router.getCurrentNavigation()?.extras.state}ngOnInit(){null!=this.state?(this.id=this.state.id,this.doctorService.getAllDoctorss().subscribe(o=>{this.doctors=o.medicos}),this.buildingLogService.getBuildingLogById(this.id).subscribe(o=>{console.log(o.registro.tipo_ingreso),this.isEmpleado="EMPLEADO"===o.registro.tipo_ingreso||"MEDICO CONSULTA"===o.registro.tipo_ingreso,this.accessLogForm.get("id")?.setValue(this.id),this.accessLogForm.get("tipo_ingreso")?.setValue(o.registro.tipo_ingreso),this.accessLogForm.get("nombre_ingreso")?.setValue(o.registro.nombre_ingreso),this.accessLogForm.get("nombre_acompanante")?.setValue(o.registro.nombre_acompanante),this.accessLogForm.get("motivo_ingreso")?.setValue(o.registro.motivo_ingreso),this.accessLogForm.get("medico")?.setValue(o.registro.medico),this.accessLogForm.get("hora_entrada")?.setValue(o.registro.hora_entrada),this.accessLogForm.get("hora_salida")?.setValue(o.registro.hora_salida)})):this.router.navigateByUrl("admin/accessLog/buildingLog")}campoEsValido(o){return this.accessLogForm.controls[o].errors&&this.accessLogForm.controls[o].touched}getType(){this.isEmpleado=!1,("EMPLEADO"===this.accessLogForm.value.tipo_ingreso||"MEDICO CONSULTA"===this.accessLogForm.value.tipo_ingreso)&&(this.isEmpleado=!0)}addProcedure(){"EMPLEADO"===this.accessLogForm.get("type")?.value||"MEDICO CONSULTA"===this.accessLogForm.value.tipo_ingreso?(this.accessLogForm.get("acompanante")?.setValue("N/A"),this.accessLogForm.get("motivo")?.setValue("N/A"),this.accessLogForm.get("medico")?.setValue(0)):(this.accessLogForm.get("acompanante")?.setValue(this.accessLogForm.value.acompanante.toUpperCase()),this.accessLogForm.get("motivo")?.setValue(this.accessLogForm.value.motivo.toUpperCase()));const o=(new Date).getUTCDate(),n=(new Date).getUTCMonth(),i=(new Date).getUTCFullYear(),c=new Date(i,n,o).toUTCString();this.accessLogForm.get("nombre")?.setValue(this.accessLogForm.value.nombre.toUpperCase()),this.accessLogForm.get("fecha")?.setValue(c),console.log(this.accessLogForm.value),this.buildingLogService.editBuildingLog(this.accessLogForm.value).subscribe({complete:()=>{this.router.navigateByUrl("admin/accessLog/buildingLog")},next:s=>{console.log(s),g().fire({icon:"success",title:"Registro se guardo correctamente"})},error:s=>{g().fire({icon:"error",title:"Error al guardar el Registro",text:s.msg})}})}return(){this.router.navigateByUrl("admin/accessLog/buildingLog")}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(p.F0),e.Y36(h.M),e.Y36(A.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-building-log"]],decls:48,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"mx-4",3,"formGroup"],[1,"row"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","tipo_ingreso","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre_ingreso","required","",1,"uppercase"],["class","col-xl-5 col-lg-5 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-3 col-lg-3 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-4 col-lg-4 col-md-12 col-sm-12",4,"ngIf"],["matInput","","formControlName","hora_entrada","required",""],["matInput","","formControlName","hora_salida","required",""],["mat-raised-button","","color","primary",1,"btn-space",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"],[3,"value"],["matInput","","formControlName","nombre_acompanante","required","",1,"uppercase"],[1,"col-xl-3","col-lg-3","col-md-12","col-sm-12"],["matInput","","formControlName","motivo_ingreso","required","",1,"uppercase"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12"],["formControlName","medico","required",""]],template:function(n,i){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),e._uU(9,"Editar registro"),e.qZA()(),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tipo Ingreso"),e.qZA(),e.TgZ(17,"mat-select",13),e.NdJ("selectionChange",function(){return i.getType()}),e.YNc(18,Te,2,2,"mat-option",14),e.qZA(),e.YNc(19,Le,2,1,"mat-error",15),e.qZA()(),e.TgZ(20,"div",16)(21,"mat-form-field",17)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",18),e.YNc(25,be,2,1,"mat-error",15),e.qZA()(),e.YNc(26,Ce,6,1,"div",19),e.qZA(),e.TgZ(27,"div",10),e.YNc(28,Ee,6,1,"div",20),e.YNc(29,Be,7,2,"div",21),e.TgZ(30,"div",11)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Entrada (Ejemplo: 12:00 AM)"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,qe,2,1,"mat-error",15),e.qZA()(),e.TgZ(36,"div",11)(37,"mat-form-field",17)(38,"mat-label"),e._uU(39,"Salida (Ejemplo: 12:00 AM)"),e.qZA(),e._UZ(40,"input",23),e.YNc(41,De,2,1,"mat-error",15),e.qZA()()(),e.TgZ(42,"div",10)(43,"div",5)(44,"button",24),e.NdJ("click",function(){return i.addProcedure()}),e._uU(45,"Guardar Cambios"),e.qZA(),e.TgZ(46,"button",25),e.NdJ("click",function(){return i.return()}),e._uU(47,"Cancel"),e.qZA()()()()()()()()()()),2&n&&(e.xp6(3),e.Q6J("title","Bitacora")("items",e.DdM(12,Fe))("active_item","Editar registro"),e.xp6(8),e.Q6J("formGroup",i.accessLogForm),e.xp6(7),e.Q6J("ngForOf",i.types),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("tipo_ingreso")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("nombre_ingreso")),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(2),e.Q6J("ngIf",!i.isEmpleado),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_entrada")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_salida")))},dependencies:[d.sg,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,v.ey,_.lW,u.KE,u.hX,u.TO,C.Nt,x.gD,Z.L]})}return t})()},{path:"**",component:b}];let Oe=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ie),p.Bz]})}return t})(),ye=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[d.ez,E.m,r.u5,r.UX,U.K,Oe]})}return t})()}}]);