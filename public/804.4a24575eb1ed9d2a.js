"use strict";(self.webpackChunkcliniva=self.webpackChunkcliniva||[]).push([[804],{985:(N,A,d)=>{d.r(A),d.d(A,{ReportsRoutingModule:()=>St});var C=d(1896),y=d(931),s=d(6223),p=d(5313),t=d(5879),D=d(5649),h=d(1744),b=d(6814),x=d(2296),v=d(8034),_=d(4170),q=d(617),U=d(2032),M=d(7961);function k(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha de inicio"))}function F(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha fin"))}function J(e,l){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Doctor"),t.qZA())}function B(e,l){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",35),t.qZA()),2&e&&(t.Q6J("formGroup",l.$implicit),t.xp6(1),t.Q6J("readonly",!0))}function L(e,l){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Consultorio"),t.qZA())}function Y(e,l){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",36),t.qZA()),2&e&&(t.Q6J("formGroup",l.$implicit),t.xp6(1),t.Q6J("readonly",!0))}function Q(e,l){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Total"),t.qZA())}function E(e,l){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",37),t.qZA()),2&e&&t.Q6J("formGroup",l.$implicit)}function I(e,l){1&e&&t._UZ(0,"tr",38)}function P(e,l){1&e&&t._UZ(0,"tr",39)}function $(e,l){if(1&e&&(t.TgZ(0,"div",40)(1,"div",16)(2,"div",41)(3,"div",17)(4,"h2",18),t._uU(5),t.qZA()(),t.TgZ(6,"div",42)(7,"div",43),t._UZ(8,"canvas",44),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(5),t.hij("Total Visitas ",o.totalVisitas,""),t.xp6(3),t.Q6J("data",o.pieChartData)("type",o.pieChartType)("options",o.pieChartOptions)}}function G(e,l){if(1&e&&(t.TgZ(0,"div",41)(1,"div",16)(2,"div",17)(3,"h2",18),t._uU(4,"Pacientes por dia"),t.qZA()(),t.TgZ(5,"div",42)(6,"div",43),t._UZ(7,"canvas",45),t.qZA()()()()),2&e){const o=t.oxw();t.xp6(7),t.Q6J("data",o.barChartData)("options",o.barChartOptions)("plugins",o.barChartPlugins)("type",o.barChartType)}}let j=(()=>{class e{constructor(o,i,r,c,u){this.fb=o,this._formBuilder=i,this.cliqProceduresService=r,this.buildingLogService=c,this.cdr=u,this.totalGastos=0,this.totalIngresos=0,this.balance=0,this.showIngresos=!1,this.showChart=!1,this.totalVisitas=0,this.dataSource=new p.by,this.dataSource2=new p.by,this.daysCount=0,this.form=this.fb.group({start:["",s.kI.required],end:["",s.kI.required]}),this.barChartOptions={responsive:!0,scales:{x:{ticks:{color:"#9aa0ac"}},y:{ticks:{color:"#9aa0ac"},min:0}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartPlugins=[],this.barChartData={labels:[],datasets:[]},this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right"}}},this.pieChartData={labels:[],datasets:[{data:[]}]},this.pieChartType="pie",this.displayedColumns=["doctor","consultorio","total"],this.displayedColumns2=["ingreso","importe"],this.myFilter=a=>{const m=(a||new Date).getDay();return 0!==m&&7!==m}}ngOnInit(){this.VOForm=this._formBuilder.group({VORows:this._formBuilder.array([])}),this.proceduresForm=this._formBuilder.group({operatingRoomsRows:this._formBuilder.array([])})}calculate(){console.log(this.VOForm.value),console.log(this.proceduresForm.value),this.totalGastos=this.VOForm.value.VORows.reduce((o,i)=>(console.log(i),i.isDivisible?o+parseFloat(i.importe)/30*this.daysCount:o+parseFloat(i.importe)),0),this.totalIngresos=this.proceduresForm.value.operatingRoomsRows.reduce((o,i)=>o+parseFloat(i.importe),0),console.log(this.totalGastos),this.balance=this.totalIngresos-this.totalGastos}calculateDays(o,i){let r=new Date(o);return(new Date(i)-r)/864e5+1}myCallback(o){return o.fecha}search(){let o=this.form.value.start,i=this.form.value.end,r=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),c=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate();console.log(r),console.log(c),this.buildingLogService.getBuildingLogReport(r,c).subscribe(u=>{console.log(u);let a={};for(let g=0;g<u.registros.length;g++){let f=u.registros[g].fecha.toString();a[f]||(a[f]=[]),a[f].push({nombre:u.registros[g].apellidos.trim()+" "+u.registros[g].nombre.trim(),count:u.registros[g].count})}let m=[];for(let g in a)m.push({group:g,values:a[g]});let n=[];m.forEach(g=>{for(let f=0;f<g.values.length;f++)n.push({label:g.values[f].nombre,data:g.values[f].count})});let T=[];n.forEach(g=>{let f=g.label;T[f]||(T[f]=[]),T[f].push(g.data)});const wt=Object.keys(T);for(const g of wt)this.barChartData.datasets.push({label:g,data:T[g]});m.forEach(g=>this.barChartData.labels?.push(g.group))}),this.buildingLogService.getBuildingLogReportTotal(r,c).subscribe(u=>{console.log(u);let a=[],m=[],n=[];u.registros.forEach(Z=>this.totalVisitas=this.totalVisitas+Z.count),u.registros.forEach(Z=>{a.push(Z.count),m.push(Z.apellidos.trim()+" "+Z.nombre.trim()),n.push(this.getRandomColor())}),this.pieChartData.datasets.push({data:a,backgroundColor:n}),this.pieChartData.labels=m,console.log(this.pieChartData),this.showChart=!0,this.VOForm=this.fb.group({VORows:this.fb.array(u.registros.map(Z=>this.fb.group({medico:new s.NI(Z.apellidos+" "+Z.nombre),consultorio:new s.NI(Z.descripcion_consultorio),cantidad:new s.NI(Z.count)})))}),this.dataSource=new p.by(this.VOForm.get("VORows").controls)})}campoEsValido(o){return this.form.controls[o].errors&&this.form.controls[o].touched}getRandomColor(){for(var i="#",r=0;r<6;r++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return i}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qu),t.Y36(s.qu),t.Y36(D.J),t.Y36(h.M),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-building-log-report"]],decls:49,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","me-2"],["matInput","","formControlName","start",3,"matDatepickerFilter","matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["appearance","outline",1,"col-3"],["matInput","","formControlName","end",3,"matDatepickerFilter","matDatepicker"],["picker2",""],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"background-color","#144464"],[2,"color","white"],[1,"table-responsive"],["autocomplete","off",3,"formGroup"],["formArrayName","VORows"],["mat-table","",3,"dataSource"],["table",""],["matColumnDef","doctor"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"formGroup",4,"matCellDef"],["matColumnDef","consultorio"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-lg-7 col-md-7 col-sm-12 col-xs-12",4,"ngIf"],["class","col-lg-12",4,"ngIf"],["mat-header-cell",""],["mat-cell","",3,"formGroup"],["matInput","","type","text","formControlName","medico",2,"width","280px","border","none",3,"readonly"],["matInput","","type","text","formControlName","consultorio",2,"width","150px","border","none",3,"readonly"],["matInput","","type","number","formControlName","cantidad",2,"width","90px","border","none"],["mat-header-row",""],["mat-row",""],[1,"col-lg-7","col-md-7","col-sm-12","col-xs-12"],[1,"col-lg-12"],[1,"body"],[1,"recent-report__chart"],["baseChart","",1,"chart",2,"height","33rem",3,"data","type","options"],["baseChart","",1,"chart",3,"data","options","plugins","type"]],template:function(i,r){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Fecha Inicio"),t.qZA(),t._UZ(8,"input",6)(9,"mat-datepicker-toggle",7)(10,"mat-datepicker",null,8),t.YNc(12,k,2,1,"mat-error",9),t.qZA(),t.TgZ(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Fecha Fin"),t.qZA(),t._UZ(16,"input",11)(17,"mat-datepicker-toggle",7)(18,"mat-datepicker",null,12),t.YNc(20,F,2,1,"mat-error",9),t.qZA(),t.TgZ(21,"button",13),t.NdJ("click",function(){return r.search()}),t.TgZ(22,"mat-icon"),t._uU(23,"search"),t.qZA(),t._uU(24," Buscar "),t.qZA()()(),t.TgZ(25,"div",14)(26,"div",15)(27,"div",16)(28,"div",17)(29,"h2",18),t._uU(30,"Registro de Pacientes"),t.qZA()(),t.TgZ(31,"div",19)(32,"form",20),t.ynx(33,21),t.TgZ(34,"table",22,23),t.ynx(36,24),t.YNc(37,J,2,0,"th",25),t.YNc(38,B,2,2,"td",26),t.BQk(),t.ynx(39,27),t.YNc(40,L,2,0,"th",25),t.YNc(41,Y,2,2,"td",26),t.BQk(),t.ynx(42,28),t.YNc(43,Q,2,0,"th",25),t.YNc(44,E,2,1,"td",26),t.BQk(),t.YNc(45,I,1,0,"tr",29),t.YNc(46,P,1,0,"tr",30),t.qZA(),t.BQk(),t.qZA()()()(),t.YNc(47,$,9,4,"div",31),t.qZA(),t.YNc(48,G,8,4,"div",32),t.qZA()()),2&i){const c=t.MAs(11),u=t.MAs(19);t.xp6(4),t.Q6J("formGroup",r.form),t.xp6(4),t.Q6J("matDatepickerFilter",r.myFilter)("matDatepicker",c),t.xp6(1),t.Q6J("for",c),t.xp6(3),t.Q6J("ngIf",r.campoEsValido("start")),t.xp6(4),t.Q6J("matDatepickerFilter",r.myFilter)("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(3),t.Q6J("ngIf",r.campoEsValido("end")),t.xp6(12),t.Q6J("formGroup",r.VOForm),t.xp6(2),t.Q6J("dataSource",r.dataSource),t.xp6(11),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",r.showChart),t.xp6(1),t.Q6J("ngIf",r.showChart)}},dependencies:[b.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,s.CE,x.lW,v.Mq,v.hl,v.nW,_.KE,_.hX,_.TO,_.R9,q.Hw,U.Nt,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,M.jh],styles:[".mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__row[_ngcontent-%COMP%]{height:25px}.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__header-row[_ngcontent-%COMP%]{height:30px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return e})();var V=d(7518),S=d(3680),z=d(8525),w=d(2596);function H(e,l){if(1&e&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.Q6J("value",o.id_procedimiento),t.xp6(1),t.hij(" ",o.nombre_procedimiento," ")}}function W(e,l){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o)}}function X(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){const o=l.$implicit;t.xp6(2),t.Oqu(o.month),t.xp6(2),t.Oqu(o.total)}}function K(e,l){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o)}}function tt(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA()()),2&e){const o=l.$implicit;t.xp6(2),t.Oqu(o.procedure),t.xp6(2),t.Oqu(o.acumulado),t.xp6(2),t.Oqu(o.enero),t.xp6(2),t.Oqu(o.febrero),t.xp6(2),t.Oqu(o.marzo),t.xp6(2),t.Oqu(o.abril),t.xp6(2),t.Oqu(o.mayo),t.xp6(2),t.Oqu(o.junio),t.xp6(2),t.Oqu(o.julio),t.xp6(2),t.Oqu(o.agosto),t.xp6(2),t.Oqu(o.septiembre),t.xp6(2),t.Oqu(o.octubre),t.xp6(2),t.Oqu(o.noviembre),t.xp6(2),t.Oqu(o.diciembre)}}let et=(()=>{class e{constructor(o,i,r,c,u,a){this.fb=o,this._formBuilder=i,this.cliqProceduresService=r,this.buildingLogService=c,this.cdr=u,this.proceduresCatalogService=a,this.totalGastos=0,this.totalIngresos=0,this.balance=0,this.showIngresos=!1,this.showTable=!1,this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.array=[],this.proceduresByMonth=[],this.proceduresCatalog=[],this.columns=["Procedimiento","Mes","Cantidad"],this.columnsSearch=["Mes","Cantidad"],this.data=[],this.monthsColumns=["Procedimiento","Acumulado","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.dataSource=new p.by,this.dataSource2=new p.by,this.daysCount=0,this.form=this.fb.group({start:["",s.kI.required],end:["",s.kI.required],procedimiento:["",s.kI.required]})}setHeader(o,i){return o}ngOnInit(){this.cliqProceduresService.getAcumulativeProceduresReport().subscribe(o=>{console.log(o);let i={},r=[];for(let a=0;a<o.final.length;a++){let m=this.getMonth(o.final[a].month);i[m]||(i[m]=[]),i[m].push(o.final[a].info)}let c=[];for(let a in i)c.push({group:a,values:i[a][0]});console.log(c),console.log(this.monthsColumns),c.forEach(a=>{a.values.map(m=>{let n=m["Catalogo_Procedimiento.nombre_procedimiento"];r[n]||(r[n]=[]),r[n].push({month:a.group,count:m.count})})}),console.log(r);let u=Object.keys(r);console.log(u),this.data=u.map(a=>({name:a,data:r[a]})),console.log(this.data);for(let a=0;a<this.data.length;a++){let m={procedure:this.data[a].name,acumulado:0,enero:0,febrero:0,marzo:0,abril:0,mayo:0,junio:0,julio:0,agosto:0,septiembre:0,octubre:0,noviembre:0,diciembre:0};for(let n=0;n<this.months.length;n++)this.data[a].data[n]&&this.data[a].data[n].count&&(m.acumulado=m.acumulado+this.data[a].data[n].count),this.data[a].data[n]&&"Enero"==this.data[a].data[n].month&&(m.enero=this.data[a].data[n].count),this.data[a].data[n]&&"Febrero"==this.data[a].data[n].month&&(m.febrero=this.data[a].data[n].count),this.data[a].data[n]&&"Marzo"==this.data[a].data[n].month&&(m.marzo=this.data[a].data[n].count),this.data[a].data[n]&&"Abril"==this.data[a].data[n].month&&(m.abril=this.data[a].data[n].count),this.data[a].data[n]&&"Mayo"==this.data[a].data[n].month&&(m.mayo=this.data[a].data[n].count),this.data[a].data[n]&&"Junio"==this.data[a].data[n].month&&(m.junio=this.data[a].data[n].count),this.data[a].data[n]&&"Julio"==this.data[a].data[n].month&&(m.julio=this.data[a].data[n].count),this.data[a].data[n]&&"Agosto"==this.data[a].data[n].month&&(m.agosto=this.data[a].data[n].count),this.data[a].data[n]&&"Septiembre"==this.data[a].data[n].month&&(m.septiembre=this.data[a].data[n].count),this.data[a].data[n]&&"Octubre"==this.data[a].data[n].month&&(m.octubre=this.data[a].data[n].count),this.data[a].data[n]&&"Noviembre"==this.data[a].data[n].month&&(m.noviembre=this.data[a].data[n].count),this.data[a].data[n]&&"Diciembre"==this.data[a].data[n].month&&(m.diciembre=this.data[a].data[n].count);this.array.push(m)}}),this.proceduresCatalogService.getAllProceduresDetails().subscribe(o=>{this.proceduresCatalog=o.catalogoProcedimiento.rows})}getMonth(o){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][o]}search(){this.proceduresByMonth=[];let o=this.form.value.start,i=this.form.value.end,r=new Date(Date.UTC(new Date(o).getUTCFullYear(),new Date(o).getUTCMonth(),new Date(o).getUTCDate(),0,0,0)).toUTCString(),c=new Date(Date.UTC(new Date(i).getUTCFullYear(),new Date(i).getUTCMonth(),new Date(i).getUTCDate(),23,59,59)).toUTCString();console.log(r);let u={start:r,end:c,procedimiento:this.form.get("procedimiento")?.value};console.log(u),this.cliqProceduresService.getTotalMonthProceduresByIdReport(u).subscribe(a=>{console.log(a),a.result.forEach(n=>{console.log(n),this.proceduresByMonth.push({procedimiento:n.total[0].Catalogo_Procedimiento.nombre_procedimiento,total:n.total[0].count,month:n.month})}),this.showTable=!0,console.log(this.proceduresByMonth)})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qu),t.Y36(s.qu),t.Y36(D.J),t.Y36(h.M),t.Y36(t.sBO),t.Y36(V.Z))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-acumulative-procedures-report"]],decls:57,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"background-color","#144464"],[2,"color","white"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","ms-3"],["matInput","","formControlName","start",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","year"],["picker",""],["matInput","","formControlName","end",3,"matDatepicker"],["picker2",""],["appearance","outline",1,"col-5","ms-3"],["formControlName","procedimiento","required",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"col-lg-3","col-md-6","col-sm-12","col-xs-12"],[1,"table-striped"],[4,"ngFor","ngForOf"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"export-button","m-l-10","image-upload"],["for","uploadBtn"],["src","assets/images/icons/xlsx.png","matTooltip","Exportar"],[1,"table","table-hover"],[3,"value"]],template:function(i,r){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),t._uU(8,"Filtros"),t.qZA()(),t.TgZ(9,"div",8)(10,"form",9)(11,"mat-form-field",10)(12,"mat-label"),t._uU(13,"Fecha Inicio"),t.qZA(),t._UZ(14,"input",11)(15,"mat-datepicker-toggle",12)(16,"mat-datepicker",13,14),t.qZA(),t.TgZ(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Fecha Fin"),t.qZA(),t._UZ(21,"input",15)(22,"mat-datepicker-toggle",12)(23,"mat-datepicker",13,16),t.qZA(),t.TgZ(25,"mat-form-field",17)(26,"mat-label"),t._uU(27,"Procedimiento"),t.qZA(),t.TgZ(28,"mat-select",18),t.YNc(29,H,2,2,"mat-option",19),t.qZA()(),t.TgZ(30,"button",20),t.NdJ("click",function(){return r.search()}),t.TgZ(31,"mat-icon"),t._uU(32,"search"),t.qZA(),t._uU(33," Buscar "),t.qZA()()()()(),t.TgZ(34,"div",21)(35,"div",5)(36,"div",6)(37,"h2",7),t._uU(38,"Resultado"),t.qZA()(),t.TgZ(39,"table",22),t.YNc(40,W,2,1,"th",23),t.YNc(41,X,5,2,"tr",23),t.qZA()()()(),t.TgZ(42,"div",3)(43,"div",24)(44,"div",5)(45,"div",6)(46,"div",25)(47,"label",26),t._UZ(48,"img",27),t.qZA()(),t.TgZ(49,"h2",7),t._uU(50,"Reporte Acumulado de Procedimientos"),t.qZA()(),t.TgZ(51,"div")(52,"table",28)(53,"tbody")(54,"tr"),t.YNc(55,K,2,1,"th",23),t.qZA(),t.YNc(56,tt,29,14,"tr",23),t.qZA()()()()()()()()),2&i){const c=t.MAs(17),u=t.MAs(24);t.xp6(10),t.Q6J("formGroup",r.form),t.xp6(4),t.Q6J("matDatepicker",c),t.xp6(1),t.Q6J("for",c),t.xp6(6),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(7),t.Q6J("ngForOf",r.proceduresCatalog),t.xp6(11),t.Q6J("ngForOf",r.columnsSearch),t.xp6(1),t.Q6J("ngForOf",r.proceduresByMonth),t.xp6(14),t.Q6J("ngForOf",r.monthsColumns),t.xp6(1),t.Q6J("ngForOf",r.array)}},dependencies:[b.sg,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,S.ey,x.lW,v.Mq,v.hl,v.nW,_.KE,_.hX,_.R9,q.Hw,U.Nt,z.gD,w.gM]})}return e})();var O=d(1476),R=d(3566),ot=d(2438),at=d(2589),it=d(7884);let rt=(()=>{class e{constructor(){}static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const nt=["filter"];function lt(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha de inicio"))}function st(e,l){1&e&&t._UZ(0,"mat-header-cell",49),2&e&&t.Q6J("ngClass","tbl-col-width-per-6")}function ct(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Tipo"),t.qZA())}function mt(e,l){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.tipo_ingreso)}}function ut(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Nombre"),t.qZA())}function dt(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Nombre:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.nombre_ingreso," ")}}function pt(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Acompa\xf1ante"),t.qZA())}function ht(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Acompa\xf1ante:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.nombre_acompanante," ")}}function gt(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Motivo"),t.qZA())}function ft(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Motivo:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.motivo_ingreso," ")}}function _t(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Medico"),t.qZA())}function Zt(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Medico:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",0===o.medico?"N/A":o.apellidos+" "+o.nombre," ")}}function bt(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Fecha"),t.qZA())}function vt(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Fecha:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.fecha," ")}}function Ct(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Entrada"),t.qZA())}function Tt(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Entrada:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.hora_entrada," ")}}function At(e,l){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Salida"),t.qZA())}function yt(e,l){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Salida:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=l.$implicit;t.xp6(3),t.hij(" ",o.hora_salida," ")}}function xt(e,l){1&e&&t._UZ(0,"mat-header-row")}function qt(e,l){1&e&&t._UZ(0,"mat-row",51),2&e&&t.Udp("cursor","pointer")}const Ut=function(){return[5,10,25,100]},Dt=[{path:"buildingLogReport",component:j},{path:"acumulativeProceduresReport",component:et},{path:"searchLog",component:(()=>{class e extends at.n{constructor(o,i,r){super(),this.fb=o,this.buildingLogService=i,this.reportsServices=r,this.displayedColumns=["type","name","companion","motive","medic","date","entrance","exit"],this.dataSource=new p.by,this.records=[],this.dataLength=0,this.form=this.fb.group({start:["",s.kI.required]}),this.myFilter=c=>{const u=(c||new Date).getDay();return 0!==u&&7!==u}}exportExcel(){const o=this.dataSource.filteredData.map(i=>({Tipo:i.tipo_ingreso,Nombre:i.nombre_ingreso,Acompa\u00f1ante:i.nombre_acompanante,Motivo:i.motivo_ingreso,Medico:null==i.id_medico?"N/A":i.nombre+" "+i.apellidos,Fecha:i.fecha.toString(),Entrada:i.hora_entrada,Salida:i.hora_salida}));it.c.exportToExcel(o,"excel")}campoEsValido(o){return this.form.controls[o].errors&&this.form.controls[o].touched}search(){this.buildingLogService.getBuildingLogByDay(new Date(this.form.get("start")?.value).toISOString()).subscribe(o=>{console.log(o),this.records=o.rows,this.dataSource=new p.by(this.records),this.dataSource.paginator=this.paginator,this.dataLength=this.records.length}),this.subs.sink=(0,ot.R)(this.filter?.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter?.nativeElement.value)})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qu),t.Y36(h.M),t.Y36(rt))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-log"]],viewQuery:function(i,r){if(1&i&&(t.Gf(O.NW,7),t.Gf(R.YE,7),t.Gf(nt,7)),2&i){let c;t.iGM(c=t.CRH())&&(r.paginator=c.first),t.iGM(c=t.CRH())&&(r.sort=c.first),t.iGM(c=t.CRH())&&(r.filter=c.first)}},features:[t.qOj],decls:73,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","me-2"],["matInput","","formControlName","start",3,"matDatepickerFilter","matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["id","search-input","placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],[1,"export-button","m-l-10","image-upload"],["matTooltip","Exportar Excel",1,"export-button","m-l-10"],["src","assets/images/icons/xlsx.png","alt","",3,"click"],[1,"body","overflow-auto"],[1,"responsive_table"],["matSort","",1,"mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","companion"],["matColumnDef","motive"],["matColumnDef","medic"],["matColumnDef","date"],["matColumnDef","entrance"],["matColumnDef","exit"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"ngClass"],[1,"mobile-label"],["matRipple",""]],template:function(i,r){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Fecha"),t.qZA(),t._UZ(8,"input",6)(9,"mat-datepicker-toggle",7)(10,"mat-datepicker",null,8),t.YNc(12,lt,2,1,"mat-error",9),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return r.search()}),t.TgZ(14,"mat-icon"),t._uU(15,"search"),t.qZA(),t._uU(16," Buscar "),t.qZA()()(),t.TgZ(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"ul",16)(23,"li",17)(24,"h2"),t._uU(25,"Listado"),t.qZA()(),t.TgZ(26,"li",18)(27,"label",19)(28,"i",20),t._uU(29,"search"),t.qZA()(),t._UZ(30,"input",21,22),t.qZA()()(),t.TgZ(32,"div",23)(33,"ul",24)(34,"li",25)(35,"div",26)(36,"div",27)(37,"img",28),t.NdJ("click",function(){return r.exportExcel()}),t.qZA()()()()()()(),t.TgZ(38,"div",29)(39,"div",30)(40,"mat-table",31,32),t.ynx(42,33),t.YNc(43,st,1,1,"mat-header-cell",34),t.BQk(),t.ynx(44,35),t.YNc(45,ct,2,0,"mat-header-cell",36),t.YNc(46,mt,2,1,"mat-cell",37),t.BQk(),t.ynx(47,38),t.YNc(48,ut,2,0,"mat-header-cell",36),t.YNc(49,dt,4,1,"mat-cell",37),t.BQk(),t.ynx(50,39),t.YNc(51,pt,2,0,"mat-header-cell",36),t.YNc(52,ht,4,1,"mat-cell",37),t.BQk(),t.ynx(53,40),t.YNc(54,gt,2,0,"mat-header-cell",36),t.YNc(55,ft,4,1,"mat-cell",37),t.BQk(),t.ynx(56,41),t.YNc(57,_t,2,0,"mat-header-cell",36),t.YNc(58,Zt,4,1,"mat-cell",37),t.BQk(),t.ynx(59,42),t.YNc(60,bt,2,0,"mat-header-cell",36),t.YNc(61,vt,4,1,"mat-cell",37),t.BQk(),t.ynx(62,43),t.YNc(63,Ct,2,0,"mat-header-cell",36),t.YNc(64,Tt,4,1,"mat-cell",37),t.BQk(),t.ynx(65,44),t.YNc(66,At,2,0,"mat-header-cell",36),t.YNc(67,yt,4,1,"mat-cell",37),t.BQk(),t.YNc(68,xt,1,0,"mat-header-row",45),t.YNc(69,qt,1,2,"mat-row",46),t.qZA(),t._UZ(70,"mat-paginator",47,48),t.qZA()()()()(),t._UZ(72,"div",11),t.qZA()()),2&i){const c=t.MAs(11);t.xp6(4),t.Q6J("formGroup",r.form),t.xp6(4),t.Q6J("matDatepickerFilter",r.myFilter)("matDatepicker",c),t.xp6(1),t.Q6J("for",c),t.xp6(3),t.Q6J("ngIf",r.campoEsValido("start")),t.xp6(28),t.Q6J("dataSource",r.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(12,Ut))}},dependencies:[b.mk,b.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.lW,v.Mq,v.hl,v.nW,_.KE,_.hX,_.TO,_.R9,q.Hw,U.Nt,O.NW,S.wG,R.YE,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,w.gM]})}return e})()},{path:"**",component:y.M}];let St=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(Dt),C.Bz]})}return e})()},9741:(N,A,d)=>{d.d(A,{$:()=>p});var C=d(553),y=d(5879),s=d(9862);let p=(()=>{class t{constructor(h){this.http=h,this.isTblLoading=!0,this.urlEndpoint=C.N.patientsEndpoints,this.urlApi=C.N.api,this.urlMedicalRecordEndpoint=C.N.medicalRecordEndpoint}getAllPatients(h){return this.http.get(`${this.urlApi}${this.urlEndpoint}${h}`)}getAllPatientsAdmin(){return this.http.get(`${this.urlApi}${this.urlEndpoint}allPatientsAdm/`)}getPatientById(h){return console.log(h),this.http.get(`${this.urlApi}${this.urlEndpoint}patientById/${h}`)}addPatient(h){return this.http.post(`${this.urlApi}pacientes`,h)}editPatient(h,b){return this.http.put(`${this.urlApi}${this.urlEndpoint}${h}`,b)}disablePatient(h){return this.http.delete(`${this.urlApi}${this.urlEndpoint}${h}`)}getMedicalRecordById(h){return this.http.get(`${this.urlApi}${this.urlMedicalRecordEndpoint}${h}`)}saveMedicalRecord(h){return this.http.post(`${this.urlApi}${this.urlMedicalRecordEndpoint}`,h)}updateMedicalRecord(h,b){return this.http.put(`${this.urlApi}${this.urlMedicalRecordEndpoint}${b}`,h)}static#t=this.\u0275fac=function(b){return new(b||t)(y.LFG(s.eN))};static#e=this.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);