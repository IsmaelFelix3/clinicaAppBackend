"use strict";(self.webpackChunkcliniva=self.webpackChunkcliniva||[]).push([[76],{5076:(Ct,_,a)=>{a.r(_),a.d(_,{AccessLogModule:()=>Zt});var d=a(6814),c=a(6223),B=a(5531),x=a(1858),u=a(1896),L=a(8337),v=a(1476),p=a(3566),m=a(5313),U=a(2589),N=a(2438),y=a(3519),g=a.n(y),t=a(5879),Z=a(9862),q=a(9347),C=a(553);const Y=C.N.api,D=C.N.buildingLogEndpoint;let Q=(()=>{class e{constructor(o){this.http=o}getRecords(){return this.http.get(`${Y}${D}getBitadoraRecords`)}static#t=this.\u0275fac=function(l){return new(l||e)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var k=a(2939),f=a(2296),J=a(617),T=a(3680),S=a(2596),F=a(9177),b=a(4414);const E=["filter"];function I(e,i){1&e&&t._UZ(0,"mat-header-cell",45),2&e&&t.Q6J("ngClass","tbl-col-width-per-6")}function w(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Tipo"),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.tipo_ingreso)}}function R(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Nombre"),t.qZA())}function M(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Nombre:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.nombre_ingreso," ")}}function G(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Acompa\xf1ante"),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Acompa\xf1ante:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.nombre_acompanante," ")}}function H(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Motivo"),t.qZA())}function $(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Motivo:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.motivo_ingreso," ")}}function z(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Medico"),t.qZA())}function P(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Medico:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.medico," ")}}function V(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Entrada"),t.qZA())}function K(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Entrada:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.hora_entrada," ")}}function X(e,i){1&e&&(t.TgZ(0,"mat-header-cell",46),t._uU(1,"Salida"),t.qZA())}function W(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",47),t._uU(2,"Salida:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=i.$implicit;t.xp6(3),t.hij(" ",o.hora_salida," ")}}function tt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",48),t._uU(1,"Acciones"),t.qZA())}function et(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"mat-cell",48)(1,"button",49),t.NdJ("click",function(n){return n.stopPropagation()})("click",function(){const r=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.editCall(r))}),t._UZ(2,"app-feather-icons",50),t.qZA(),t.TgZ(3,"button",51),t.NdJ("click",function(n){return n.stopPropagation()})("click",function(){const r=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.deleteItem(r))}),t._UZ(4,"app-feather-icons",50),t.qZA()()}2&e&&(t.xp6(2),t.Tol("tbl-fav-edit"),t.Q6J("icon","edit"),t.xp6(2),t.Tol("tbl-fav-delete"),t.Q6J("icon","trash-2"))}function ot(e,i){1&e&&t._UZ(0,"mat-header-row")}function it(e,i){1&e&&t._UZ(0,"mat-row",52),2&e&&t.Udp("cursor","pointer")}const nt=function(){return[5,10,25,100]};let A=(()=>{class e extends U.n{constructor(o,l,n,r,s){super(),this.httpClient=o,this.dialog=l,this.buildingLogService=n,this.snackBar=r,this.router=s,this.displayedColumns=["type","name","companion","motive","medic","entrance","exit","actions"],this.dataSource=new m.by,this.records=[],this.selection=new L.Ov(!0,[]),this.dataLength=0}ngOnInit(){this.loadData()}refresh(){this.loadData()}addNew(){let o;o="true"===localStorage.getItem("isRtl")?"rtl":"ltr",this.router.navigateByUrl("admin/accessLog/addBuildingLog")}editCall(o){this.router.navigateByUrl("admin/accessLog/editBank",{state:{id:o.id_banco}})}deleteItem(o){this.id=o.id_banco,console.log(o),g().fire({title:"\xbfDesea eliminar este registro?",text:"No podras revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar"}).then(l=>{})}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}loadData(){this.buildingLogService.getRecords().subscribe({complete:()=>{},next:o=>{console.log(o),this.records=o.registros.rows,this.dataSource=new m.by(this.records),this.dataSource.paginator=this.paginator,this.dataLength=this.records.length},error:o=>{}}),this.subs.sink=(0,N.R)(this.filter?.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter?.nativeElement.value)})}showNotification(o,l,n,r){this.snackBar.open(l,"",{duration:2e3,verticalPosition:n,horizontalPosition:r,panelClass:o})}static#t=this.\u0275fac=function(l){return new(l||e)(t.Y36(Z.eN),t.Y36(q.uw),t.Y36(Q),t.Y36(k.ux),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-building-log"]],viewQuery:function(l,n){if(1&l&&(t.Gf(v.NW,7),t.Gf(p.YE,7),t.Gf(E,7)),2&l){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first),t.iGM(r=t.CRH())&&(n.sort=r.first),t.iGM(r=t.CRH())&&(n.filter=r.first)}},features:[t.qOj],decls:65,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","Agregar",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","REFRESH",1,"m-l-10"],[1,"body","overflow-auto"],[1,"responsive_table"],["matSort","",1,"mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","companion"],["matColumnDef","motive"],["matColumnDef","medic"],["matColumnDef","entrance"],["matColumnDef","exit"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"ngClass"],["mat-sort-header",""],[1,"mobile-label"],[1,"pr-0"],["matTooltip","Editar","mat-icon-button","",1,"tbl-action-btn",3,"click"],[3,"icon"],["matTooltip","Eliminar","mat-icon-button","",1,"tbl-action-btn",3,"click"],["matRipple",""]],template:function(l,n){1&l&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),t._uU(12,"Listado"),t.qZA()(),t.TgZ(13,"li",11)(14,"label",12)(15,"i",13),t._uU(16,"search"),t.qZA()(),t._UZ(17,"input",14,15),t.qZA()()(),t.TgZ(19,"div",16)(20,"ul",17)(21,"li",18)(22,"div",19)(23,"button",20),t.NdJ("click",function(){return n.addNew()}),t.TgZ(24,"mat-icon",21),t._uU(25,"add"),t.qZA()()()(),t.TgZ(26,"li",18)(27,"div",22)(28,"button",20),t.NdJ("click",function(){return n.refresh()}),t.TgZ(29,"mat-icon",21),t._uU(30,"refresh"),t.qZA()()()()()()(),t.TgZ(31,"div",23)(32,"div",24)(33,"mat-table",25,26),t.ynx(35,27),t.YNc(36,I,1,1,"mat-header-cell",28),t.BQk(),t.ynx(37,29),t.YNc(38,w,2,0,"mat-header-cell",30),t.YNc(39,O,2,1,"mat-cell",31),t.BQk(),t.ynx(40,32),t.YNc(41,R,2,0,"mat-header-cell",30),t.YNc(42,M,4,1,"mat-cell",31),t.BQk(),t.ynx(43,33),t.YNc(44,G,2,0,"mat-header-cell",30),t.YNc(45,j,4,1,"mat-cell",31),t.BQk(),t.ynx(46,34),t.YNc(47,H,2,0,"mat-header-cell",30),t.YNc(48,$,4,1,"mat-cell",31),t.BQk(),t.ynx(49,35),t.YNc(50,z,2,0,"mat-header-cell",30),t.YNc(51,P,4,1,"mat-cell",31),t.BQk(),t.ynx(52,36),t.YNc(53,V,2,0,"mat-header-cell",30),t.YNc(54,K,4,1,"mat-cell",31),t.BQk(),t.ynx(55,37),t.YNc(56,X,2,0,"mat-header-cell",30),t.YNc(57,W,4,1,"mat-cell",31),t.BQk(),t.ynx(58,38),t.YNc(59,tt,2,0,"mat-header-cell",39),t.YNc(60,et,5,6,"mat-cell",40),t.BQk(),t.YNc(61,ot,1,0,"mat-header-row",41),t.YNc(62,it,1,2,"mat-row",42),t.qZA(),t._UZ(63,"mat-paginator",43,44),t.qZA()()()()()()()),2&l&&(t.xp6(3),t.Q6J("title","Bitacora")("active_item","Listado"),t.xp6(30),t.Q6J("dataSource",n.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",n.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(9,nt)))},dependencies:[d.mk,f.RK,f.nh,J.Hw,v.NW,T.wG,p.YE,p.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,S.gM,F.A,b.L]})}return e})();var at=a(2182),lt=a(8656),h=a(4170),rt=a(2032),ct=a(8525);function mt(e,i){if(1&e&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function st(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe ingresar el tipo de ingreso"))}function dt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe ingresar el nombre del Paciente"))}function ut(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe ingresar el nombre del acompa\xf1ante"))}function pt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe ingresar el motivo de ingreso"))}function gt(e,i){if(1&e&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.id_medico),t.xp6(1),t.hij(" ",o.apellidos+" "+o.nombre," ")}}function ft(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe ingresar el nombre del banco"))}const ht=function(){return[]},_t=[{path:"buildingLog",component:A},{path:"addBuildingLog",component:(()=>{class e{constructor(o,l,n,r){this.fb=o,this.router=l,this.bankService=n,this.doctorService=r,this.types=["Empleado","Paciente"],this.doctors=[],this.isEmpleado=!1,this.accessLogForm=this.fb.group({type:[,[c.kI.required]],nombre:[,[c.kI.required]],acompanante:[,[c.kI.required]],motivo:[,[c.kI.required]],medico:[,[c.kI.required]],entrada:[,[c.kI.required]],salida:[,[c.kI.required]]})}ngOnInit(){this.doctorService.getAllDoctorss().subscribe(o=>{this.doctors=o.medicos})}campoEsValido(o){return this.accessLogForm.controls[o].errors&&this.accessLogForm.controls[o].touched}getType(){console.log(this.accessLogForm.value)}addProcedure(){this.accessLogForm.valid?(this.accessLogForm.get("nombre")?.setValue(this.accessLogForm.value.nombre.toUpperCase()),this.bankService.addBank(this.accessLogForm.value).subscribe({complete:()=>{this.router.navigateByUrl("admin/accounting/banksCatalog")},next:o=>{console.log(o),g().fire({icon:"success",title:"Banco se guardo correctamente"})},error:o=>{g().fire({icon:"error",title:"Error al guardar el banco",text:o.msg})}})):this.accessLogForm.markAllAsTouched()}return(){this.router.navigateByUrl("admin/accounting/banksCatalog")}static#t=this.\u0275fac=function(l){return new(l||e)(t.Y36(c.qu),t.Y36(u.F0),t.Y36(at.y),t.Y36(lt.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-building-log"]],decls:52,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"mx-4",3,"formGroup"],[1,"row"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","type","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre","required","",1,"uppercase"],["matInput","","formControlName","acompanante","required","",1,"uppercase"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12"],["matInput","","formControlName","motivo","required","",1,"uppercase"],["formControlName","medico","required",""],["mat-raised-button","","color","primary",1,"btn-space",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"],[3,"value"]],template:function(l,n){1&l&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),t._uU(9,"Nuevo registro"),t.qZA()(),t.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),t._uU(16,"Tipo Ingreso"),t.qZA(),t.TgZ(17,"mat-select",13),t.NdJ("selectionChange",function(){return n.getType()}),t.YNc(18,mt,2,2,"mat-option",14),t.qZA(),t.YNc(19,st,2,1,"mat-error",15),t.qZA()(),t.TgZ(20,"div",16)(21,"mat-form-field",17)(22,"mat-label"),t._uU(23,"Paciente"),t.qZA(),t._UZ(24,"input",18),t.YNc(25,dt,2,1,"mat-error",15),t.qZA()(),t.TgZ(26,"div",16)(27,"mat-form-field",17)(28,"mat-label"),t._uU(29,"Acompa\xf1ante"),t.qZA(),t._UZ(30,"input",19),t.YNc(31,ut,2,1,"mat-error",15),t.qZA()()(),t.TgZ(32,"div",10)(33,"div",20)(34,"mat-form-field",17)(35,"mat-label"),t._uU(36,"Motivo"),t.qZA(),t._UZ(37,"input",21),t.YNc(38,pt,2,1,"mat-error",15),t.qZA()(),t.TgZ(39,"div",20)(40,"mat-form-field",12)(41,"mat-label"),t._uU(42,"Medico"),t.qZA(),t.TgZ(43,"mat-select",22),t.YNc(44,gt,2,2,"mat-option",14),t.qZA(),t.YNc(45,ft,2,1,"mat-error",15),t.qZA()()(),t.TgZ(46,"div",10)(47,"div",5)(48,"button",23),t.NdJ("click",function(){return n.addProcedure()}),t._uU(49,"Guardar"),t.qZA(),t.TgZ(50,"button",24),t.NdJ("click",function(){return n.return()}),t._uU(51,"Cancel"),t.qZA()()()()()()()()()()),2&l&&(t.xp6(3),t.Q6J("title","Bitacora")("items",t.DdM(11,ht))("active_item","Nuevo registro"),t.xp6(8),t.Q6J("formGroup",n.accessLogForm),t.xp6(7),t.Q6J("ngForOf",n.types),t.xp6(1),t.Q6J("ngIf",n.campoEsValido("type")),t.xp6(6),t.Q6J("ngIf",n.campoEsValido("nombre")),t.xp6(6),t.Q6J("ngIf",n.campoEsValido("acompanante")),t.xp6(7),t.Q6J("ngIf",n.campoEsValido("motivo")),t.xp6(6),t.Q6J("ngForOf",n.doctors),t.xp6(1),t.Q6J("ngIf",n.campoEsValido("medico")))},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,T.ey,f.lW,h.KE,h.hX,h.TO,rt.Nt,ct.gD,b.L]})}return e})()},{path:"**",component:A}];let vt=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(_t),u.Bz]})}return e})(),Zt=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[d.ez,B.m,c.u5,c.UX,x.K,vt]})}return e})()}}]);