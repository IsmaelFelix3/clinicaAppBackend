"use strict";(self.webpackChunkcliniva=self.webpackChunkcliniva||[]).push([[187],{3479:(B,A,c)=>{c.r(A),c.d(A,{ReportsRoutingModule:()=>Dt});var b=c(1896),y=c(931),n=c(6223),m=c(5313),t=c(5879),w=c(5649),u=c(1744),C=c(6814),x=c(2296),v=c(8034),Z=c(4170),D=c(617),U=c(2032),k=c(7961);function L(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha de inicio"))}function M(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha fin"))}function F(e,r){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Doctor"),t.qZA())}function O(e,r){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",35),t.qZA()),2&e&&(t.Q6J("formGroup",r.$implicit),t.xp6(1),t.Q6J("readonly",!0))}function Y(e,r){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Consultorio"),t.qZA())}function Q(e,r){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",36),t.qZA()),2&e&&(t.Q6J("formGroup",r.$implicit),t.xp6(1),t.Q6J("readonly",!0))}function J(e,r){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Total"),t.qZA())}function E(e,r){1&e&&(t.TgZ(0,"td",34),t._UZ(1,"input",37),t.qZA()),2&e&&t.Q6J("formGroup",r.$implicit)}function I(e,r){1&e&&t._UZ(0,"tr",38)}function P(e,r){1&e&&t._UZ(0,"tr",39)}function $(e,r){if(1&e&&(t.TgZ(0,"div",40)(1,"div",16)(2,"div",41)(3,"div",17)(4,"h2",18),t._uU(5),t.qZA()(),t.TgZ(6,"div",42)(7,"div",43),t._UZ(8,"canvas",44),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(5),t.hij("Total Visitas ",o.totalVisitas,""),t.xp6(3),t.Q6J("data",o.pieChartData)("type",o.pieChartType)("options",o.pieChartOptions)}}function G(e,r){if(1&e&&(t.TgZ(0,"div",41)(1,"div",16)(2,"div",17)(3,"h2",18),t._uU(4,"Pacientes por dia"),t.qZA()(),t.TgZ(5,"div",42)(6,"div",43),t._UZ(7,"canvas",45),t.qZA()()()()),2&e){const o=t.oxw();t.xp6(7),t.Q6J("data",o.barChartData)("options",o.barChartOptions)("plugins",o.barChartPlugins)("type",o.barChartType)}}let j=(()=>{class e{constructor(o,i,a,l,p){this.fb=o,this._formBuilder=i,this.cliqProceduresService=a,this.buildingLogService=l,this.cdr=p,this.totalGastos=0,this.totalIngresos=0,this.balance=0,this.showIngresos=!1,this.showChart=!1,this.totalVisitas=0,this.dataSource=new m.by,this.dataSource2=new m.by,this.daysCount=0,this.form=this.fb.group({start:["",n.kI.required],end:["",n.kI.required]}),this.barChartOptions={responsive:!0,scales:{x:{ticks:{color:"#9aa0ac"}},y:{ticks:{color:"#9aa0ac"},min:0}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartPlugins=[],this.barChartData={labels:[],datasets:[]},this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right"}}},this.pieChartData={labels:[],datasets:[{data:[]}]},this.pieChartType="pie",this.displayedColumns=["doctor","consultorio","total"],this.displayedColumns2=["ingreso","importe"],this.myFilter=f=>{const s=(f||new Date).getDay();return 0!==s&&7!==s}}ngOnInit(){this.VOForm=this._formBuilder.group({VORows:this._formBuilder.array([])}),this.proceduresForm=this._formBuilder.group({operatingRoomsRows:this._formBuilder.array([])})}calculate(){console.log(this.VOForm.value),console.log(this.proceduresForm.value),this.totalGastos=this.VOForm.value.VORows.reduce((o,i)=>(console.log(i),i.isDivisible?o+parseFloat(i.importe)/30*this.daysCount:o+parseFloat(i.importe)),0),this.totalIngresos=this.proceduresForm.value.operatingRoomsRows.reduce((o,i)=>o+parseFloat(i.importe),0),console.log(this.totalGastos),this.balance=this.totalIngresos-this.totalGastos}calculateDays(o,i){let a=new Date(o);return(new Date(i)-a)/864e5+1}myCallback(o){return o.fecha}search(){let o=this.form.value.start,i=this.form.value.end,a=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),l=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate();console.log(a),console.log(l),this.buildingLogService.getBuildingLogReport(a,l).subscribe(p=>{console.log(p);let f={};for(let g=0;g<p.registros.length;g++){let _=p.registros[g].fecha.toString();f[_]||(f[_]=[]),f[_].push({nombre:p.registros[g].apellidos.trim()+" "+p.registros[g].nombre.trim(),count:p.registros[g].count})}let s=[];for(let g in f)s.push({group:g,values:f[g]});let h=[];s.forEach(g=>{for(let _=0;_<g.values.length;_++)h.push({label:g.values[_].nombre,data:g.values[_].count})});let T=[];h.forEach(g=>{let _=g.label;T[_]||(T[_]=[]),T[_].push(g.data)});const Ut=Object.keys(T);for(const g of Ut)this.barChartData.datasets.push({label:g,data:T[g]});s.forEach(g=>this.barChartData.labels?.push(g.group))}),this.buildingLogService.getBuildingLogReportTotal(a,l).subscribe(p=>{console.log(p);let f=[],s=[],h=[];p.registros.forEach(d=>this.totalVisitas=this.totalVisitas+d.count),p.registros.forEach(d=>{f.push(d.count),s.push(d.apellidos.trim()+" "+d.nombre.trim()),h.push(this.getRandomColor())}),this.pieChartData.datasets.push({data:f,backgroundColor:h}),this.pieChartData.labels=s,console.log(this.pieChartData),this.showChart=!0,this.VOForm=this.fb.group({VORows:this.fb.array(p.registros.map(d=>this.fb.group({medico:new n.NI(d.apellidos+" "+d.nombre),consultorio:new n.NI(d.descripcion_consultorio),cantidad:new n.NI(d.count)})))}),this.dataSource=new m.by(this.VOForm.get("VORows").controls)})}campoEsValido(o){return this.form.controls[o].errors&&this.form.controls[o].touched}getRandomColor(){for(var i="#",a=0;a<6;a++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return i}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(n.qu),t.Y36(n.qu),t.Y36(w.J),t.Y36(u.M),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-building-log-report"]],decls:49,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","me-2"],["matInput","","formControlName","start",3,"matDatepickerFilter","matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["appearance","outline",1,"col-3"],["matInput","","formControlName","end",3,"matDatepickerFilter","matDatepicker"],["picker2",""],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"background-color","#144464"],[2,"color","white"],[1,"table-responsive"],["autocomplete","off",3,"formGroup"],["formArrayName","VORows"],["mat-table","",3,"dataSource"],["table",""],["matColumnDef","doctor"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"formGroup",4,"matCellDef"],["matColumnDef","consultorio"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-lg-7 col-md-7 col-sm-12 col-xs-12",4,"ngIf"],["class","col-lg-12",4,"ngIf"],["mat-header-cell",""],["mat-cell","",3,"formGroup"],["matInput","","type","text","formControlName","medico",2,"width","280px","border","none",3,"readonly"],["matInput","","type","text","formControlName","consultorio",2,"width","150px","border","none",3,"readonly"],["matInput","","type","number","formControlName","cantidad",2,"width","90px","border","none"],["mat-header-row",""],["mat-row",""],[1,"col-lg-7","col-md-7","col-sm-12","col-xs-12"],[1,"col-lg-12"],[1,"body"],[1,"recent-report__chart"],["baseChart","",1,"chart",2,"height","33rem",3,"data","type","options"],["baseChart","",1,"chart",3,"data","options","plugins","type"]],template:function(i,a){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Fecha Inicio"),t.qZA(),t._UZ(8,"input",6)(9,"mat-datepicker-toggle",7)(10,"mat-datepicker",null,8),t.YNc(12,L,2,1,"mat-error",9),t.qZA(),t.TgZ(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Fecha Fin"),t.qZA(),t._UZ(16,"input",11)(17,"mat-datepicker-toggle",7)(18,"mat-datepicker",null,12),t.YNc(20,M,2,1,"mat-error",9),t.qZA(),t.TgZ(21,"button",13),t.NdJ("click",function(){return a.search()}),t.TgZ(22,"mat-icon"),t._uU(23,"search"),t.qZA(),t._uU(24," Buscar "),t.qZA()()(),t.TgZ(25,"div",14)(26,"div",15)(27,"div",16)(28,"div",17)(29,"h2",18),t._uU(30,"Registro de Pacientes"),t.qZA()(),t.TgZ(31,"div",19)(32,"form",20),t.ynx(33,21),t.TgZ(34,"table",22,23),t.ynx(36,24),t.YNc(37,F,2,0,"th",25),t.YNc(38,O,2,2,"td",26),t.BQk(),t.ynx(39,27),t.YNc(40,Y,2,0,"th",25),t.YNc(41,Q,2,2,"td",26),t.BQk(),t.ynx(42,28),t.YNc(43,J,2,0,"th",25),t.YNc(44,E,2,1,"td",26),t.BQk(),t.YNc(45,I,1,0,"tr",29),t.YNc(46,P,1,0,"tr",30),t.qZA(),t.BQk(),t.qZA()()()(),t.YNc(47,$,9,4,"div",31),t.qZA(),t.YNc(48,G,8,4,"div",32),t.qZA()()),2&i){const l=t.MAs(11),p=t.MAs(19);t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(4),t.Q6J("matDatepickerFilter",a.myFilter)("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",a.campoEsValido("start")),t.xp6(4),t.Q6J("matDatepickerFilter",a.myFilter)("matDatepicker",p),t.xp6(1),t.Q6J("for",p),t.xp6(3),t.Q6J("ngIf",a.campoEsValido("end")),t.xp6(12),t.Q6J("formGroup",a.VOForm),t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(11),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",a.showChart),t.xp6(1),t.Q6J("ngIf",a.showChart)}},dependencies:[C.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,n.CE,x.lW,v.Mq,v.hl,v.nW,Z.KE,Z.hX,Z.TO,Z.R9,D.Hw,U.Nt,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,k.jh],styles:[".mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__row[_ngcontent-%COMP%]{height:25px}.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__header-row[_ngcontent-%COMP%]{height:30px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return e})();var V=c(7518),q=c(3680),H=c(8525),R=c(2596);function z(e,r){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o)}}function W(e,r){if(1&e&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.id_procedimiento),t.xp6(1),t.hij(" ",o.nombre_procedimiento," ")}}function X(e,r){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o)}}function K(e,r){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){const o=r.$implicit;t.xp6(2),t.Oqu(o.month),t.xp6(2),t.Oqu(o.total)}}let tt=(()=>{class e{constructor(o,i,a,l,p,f){this.fb=o,this._formBuilder=i,this.cliqProceduresService=a,this.buildingLogService=l,this.cdr=p,this.proceduresCatalogService=f,this.totalGastos=0,this.totalIngresos=0,this.balance=0,this.showIngresos=!1,this.showTable=!1,this.proceduresByMonth=[],this.proceduresCatalog=[],this.columns=["Procedimiento","Mes","Cantidad"],this.columnsSearch=["Mes","Cantidad"],this.data=[],this.monthsColumns=[],this.dataSource=new m.by,this.dataSource2=new m.by,this.daysCount=0,this.form=this.fb.group({start:["",n.kI.required],end:["",n.kI.required],procedimiento:["",n.kI.required]}),this.displayedColumns=["doctor","consultorio","cantidad"]}setHeader(o,i){return o}ngOnInit(){this.cliqProceduresService.getAcumulativeProceduresReport().subscribe(o=>{console.log(o);let i={},a=[];for(let s=0;s<o.final.length;s++){let h=this.getMonth(o.final[s].month);i[h]||(i[h]=[]),i[h].push(o.final[s].info)}let l=[];for(let s in i)l.push({group:s,values:i[s][0]});console.log(l),this.monthsColumns=l.map(s=>s.group),console.log(this.monthsColumns),l.forEach(s=>{s.values.map(h=>{let d=h["Catalogo_Procedimiento.nombre_procedimiento"];a[d]||(a[d]=[]),a[d].push({month:s.group,count:h.count})})}),console.log(a);let p=Object.keys(a);console.log(p),this.data=p.map(s=>({name:s,data:a[s]})),console.log(this.data);let f=[];for(let s=0;s<this.data.length;s++){let h=[];for(let d=0;d<this.monthsColumns.length;d++)null!=this.data[s].data[d]?this.data[s].data[d].month==this.monthsColumns[d]&&h.push(this.data[s].data[d]):h.push({month:this.monthsColumns[d],count:0});f.push({name:this.data[s].name,data:h})}console.log(f)}),this.proceduresCatalogService.getAllProceduresDetails().subscribe(o=>{this.proceduresCatalog=o.catalogoProcedimiento.rows})}getMonth(o){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][o]}search(){this.proceduresByMonth=[];let o=this.form.value.start,i=this.form.value.end,a=new Date(Date.UTC(new Date(o).getUTCFullYear(),new Date(o).getUTCMonth(),new Date(o).getUTCDate(),0,0,0)).toUTCString(),l=new Date(Date.UTC(new Date(i).getUTCFullYear(),new Date(i).getUTCMonth(),new Date(i).getUTCDate(),23,59,59)).toUTCString();console.log(a);let p={start:a,end:l,procedimiento:this.form.get("procedimiento")?.value};console.log(p),this.cliqProceduresService.getTotalMonthProceduresByIdReport(p).subscribe(f=>{console.log(f),f.result.forEach(h=>{console.log(h),this.proceduresByMonth.push({procedimiento:h.total[0].Catalogo_Procedimiento.nombre_procedimiento,total:h.total[0].count,month:h.month})}),this.showTable=!0,console.log(this.proceduresByMonth)})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(n.qu),t.Y36(n.qu),t.Y36(w.J),t.Y36(u.M),t.Y36(t.sBO),t.Y36(V.Z))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-acumulative-procedures-report"]],decls:55,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"background-color","#144464"],[1,"export-button","m-l-10","image-upload"],["for","uploadBtn"],["src","assets/images/icons/xlsx.png","matTooltip","Exportar"],[2,"color","white"],[4,"ngFor","ngForOf"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","me-2"],["matInput","","formControlName","start",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","year"],["picker",""],["appearance","outline",1,"col-3"],["matInput","","formControlName","end",3,"matDatepicker"],["picker2",""],["appearance","outline",1,"col-5","ms-3"],["formControlName","procedimiento","required",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"col-lg-3","col-md-6","col-sm-12","col-xs-12"],[1,"table-striped"],[3,"value"]],template:function(i,a){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),t._UZ(9,"img",9),t.qZA()(),t.TgZ(10,"h2",10),t._uU(11,"Reporte Acumulado de Procedimientos"),t.qZA()(),t.TgZ(12,"div")(13,"table")(14,"tbody")(15,"tr"),t.YNc(16,z,2,1,"th",11),t.qZA()()()()()(),t.TgZ(17,"div",4)(18,"div",5)(19,"div",6)(20,"h2",10),t._uU(21,"Filtros"),t.qZA()(),t.TgZ(22,"div",12)(23,"form",13)(24,"mat-form-field",14)(25,"mat-label"),t._uU(26,"Fecha Inicio"),t.qZA(),t._UZ(27,"input",15)(28,"mat-datepicker-toggle",16)(29,"mat-datepicker",17,18),t.qZA(),t.TgZ(31,"mat-form-field",19)(32,"mat-label"),t._uU(33,"Fecha Fin"),t.qZA(),t._UZ(34,"input",20)(35,"mat-datepicker-toggle",16)(36,"mat-datepicker",17,21),t.qZA(),t.TgZ(38,"mat-form-field",22)(39,"mat-label"),t._uU(40,"Procedimiento"),t.qZA(),t.TgZ(41,"mat-select",23),t.YNc(42,W,2,2,"mat-option",24),t.qZA()(),t.TgZ(43,"button",25),t.NdJ("click",function(){return a.search()}),t.TgZ(44,"mat-icon"),t._uU(45,"search"),t.qZA(),t._uU(46," Buscar "),t.qZA()()()(),t.TgZ(47,"div",26)(48,"div",5)(49,"div",6)(50,"h2",10),t._uU(51,"Resultado"),t.qZA()(),t.TgZ(52,"table",27),t.YNc(53,X,2,1,"th",11),t.YNc(54,K,5,2,"tr",11),t.qZA()()()()()()()),2&i){const l=t.MAs(30),p=t.MAs(37);t.xp6(16),t.Q6J("ngForOf",a.monthsColumns),t.xp6(7),t.Q6J("formGroup",a.form),t.xp6(4),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Q6J("matDatepicker",p),t.xp6(1),t.Q6J("for",p),t.xp6(7),t.Q6J("ngForOf",a.proceduresCatalog),t.xp6(11),t.Q6J("ngForOf",a.columnsSearch),t.xp6(1),t.Q6J("ngForOf",a.proceduresByMonth)}},dependencies:[C.sg,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,q.ey,x.lW,v.Mq,v.hl,v.nW,Z.KE,Z.hX,Z.R9,D.Hw,U.Nt,H.gD,R.gM]})}return e})();var S=c(1476),N=c(3566),et=c(2438),ot=c(2589);const at=["filter"];function it(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Debe seleccionar una fecha de inicio"))}function rt(e,r){1&e&&t._UZ(0,"mat-header-cell",49),2&e&&t.Q6J("ngClass","tbl-col-width-per-6")}function nt(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Tipo"),t.qZA())}function lt(e,r){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.tipo_ingreso)}}function st(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Nombre"),t.qZA())}function ct(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Nombre:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.nombre_ingreso," ")}}function mt(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Acompa\xf1ante"),t.qZA())}function pt(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Acompa\xf1ante:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.nombre_acompanante," ")}}function ut(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Motivo"),t.qZA())}function dt(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Motivo:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.motivo_ingreso," ")}}function ht(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Medico"),t.qZA())}function gt(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Medico:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",0===o.medico?"N/A":o.apellidos+" "+o.nombre," ")}}function ft(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Fecha"),t.qZA())}function _t(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Fecha:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.fecha," ")}}function Zt(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Entrada"),t.qZA())}function Ct(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Entrada:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.hora_entrada," ")}}function vt(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Salida"),t.qZA())}function bt(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",50),t._uU(2,"Salida:"),t.qZA(),t._uU(3),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.hij(" ",o.hora_salida," ")}}function Tt(e,r){1&e&&t._UZ(0,"mat-header-row")}function At(e,r){1&e&&t._UZ(0,"mat-row",51),2&e&&t.Udp("cursor","pointer")}const yt=function(){return[5,10,25,100]},xt=[{path:"buildingLogReport",component:j},{path:"acumulativeProceduresReport",component:tt},{path:"searchLog",component:(()=>{class e extends ot.n{constructor(o,i){super(),this.fb=o,this.buildingLogService=i,this.displayedColumns=["type","name","companion","motive","medic","date","entrance","exit"],this.dataSource=new m.by,this.records=[],this.dataLength=0,this.form=this.fb.group({start:["",n.kI.required]}),this.myFilter=a=>{const l=(a||new Date).getDay();return 0!==l&&7!==l}}campoEsValido(o){return this.form.controls[o].errors&&this.form.controls[o].touched}search(){this.buildingLogService.getBuildingLogByDay(new Date(this.form.get("start")?.value).toISOString()).subscribe(o=>{console.log(o),this.records=o.rows,this.dataSource=new m.by(this.records),this.dataSource.paginator=this.paginator,this.dataLength=this.records.length}),this.subs.sink=(0,et.R)(this.filter?.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter?.nativeElement.value)})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(n.qu),t.Y36(u.M))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-log"]],viewQuery:function(i,a){if(1&i&&(t.Gf(S.NW,7),t.Gf(N.YE,7),t.Gf(at,7)),2&i){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first),t.iGM(l=t.CRH())&&(a.sort=l.first),t.iGM(l=t.CRH())&&(a.filter=l.first)}},features:[t.qOj],decls:73,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"mt-3"],[3,"formGroup"],["appearance","outline",1,"col-3","me-2"],["matInput","","formControlName","start",3,"matDatepickerFilter","matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-raised-button","","color","primary",1,"ms-4",3,"click"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["id","search-input","placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],[1,"export-button","m-l-10","image-upload"],["for","uploadBtn"],["src","assets/images/icons/xlsx.png","matTooltip","Exportar"],[1,"body","overflow-auto"],[1,"responsive_table"],["matSort","",1,"mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","companion"],["matColumnDef","motive"],["matColumnDef","medic"],["matColumnDef","date"],["matColumnDef","entrance"],["matColumnDef","exit"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"ngClass"],[1,"mobile-label"],["matRipple",""]],template:function(i,a){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Fecha"),t.qZA(),t._UZ(8,"input",6)(9,"mat-datepicker-toggle",7)(10,"mat-datepicker",null,8),t.YNc(12,it,2,1,"mat-error",9),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return a.search()}),t.TgZ(14,"mat-icon"),t._uU(15,"search"),t.qZA(),t._uU(16," Buscar "),t.qZA()()(),t.TgZ(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"ul",16)(23,"li",17)(24,"h2"),t._uU(25,"Listado"),t.qZA()(),t.TgZ(26,"li",18)(27,"label",19)(28,"i",20),t._uU(29,"search"),t.qZA()(),t._UZ(30,"input",21,22),t.qZA()()(),t.TgZ(32,"div",23)(33,"ul",24)(34,"li",25)(35,"div",26)(36,"label",27),t._UZ(37,"img",28),t.qZA()()()()()(),t.TgZ(38,"div",29)(39,"div",30)(40,"mat-table",31,32),t.ynx(42,33),t.YNc(43,rt,1,1,"mat-header-cell",34),t.BQk(),t.ynx(44,35),t.YNc(45,nt,2,0,"mat-header-cell",36),t.YNc(46,lt,2,1,"mat-cell",37),t.BQk(),t.ynx(47,38),t.YNc(48,st,2,0,"mat-header-cell",36),t.YNc(49,ct,4,1,"mat-cell",37),t.BQk(),t.ynx(50,39),t.YNc(51,mt,2,0,"mat-header-cell",36),t.YNc(52,pt,4,1,"mat-cell",37),t.BQk(),t.ynx(53,40),t.YNc(54,ut,2,0,"mat-header-cell",36),t.YNc(55,dt,4,1,"mat-cell",37),t.BQk(),t.ynx(56,41),t.YNc(57,ht,2,0,"mat-header-cell",36),t.YNc(58,gt,4,1,"mat-cell",37),t.BQk(),t.ynx(59,42),t.YNc(60,ft,2,0,"mat-header-cell",36),t.YNc(61,_t,4,1,"mat-cell",37),t.BQk(),t.ynx(62,43),t.YNc(63,Zt,2,0,"mat-header-cell",36),t.YNc(64,Ct,4,1,"mat-cell",37),t.BQk(),t.ynx(65,44),t.YNc(66,vt,2,0,"mat-header-cell",36),t.YNc(67,bt,4,1,"mat-cell",37),t.BQk(),t.YNc(68,Tt,1,0,"mat-header-row",45),t.YNc(69,At,1,2,"mat-row",46),t.qZA(),t._UZ(70,"mat-paginator",47,48),t.qZA()()()()(),t._UZ(72,"div",11),t.qZA()()),2&i){const l=t.MAs(11);t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(4),t.Q6J("matDatepickerFilter",a.myFilter)("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",a.campoEsValido("start")),t.xp6(28),t.Q6J("dataSource",a.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(12,yt))}},dependencies:[C.mk,C.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,x.lW,v.Mq,v.hl,v.nW,Z.KE,Z.hX,Z.TO,Z.R9,D.Hw,U.Nt,S.NW,q.wG,N.YE,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,R.gM]})}return e})()},{path:"**",component:y.M}];let Dt=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(xt),b.Bz]})}return e})()},9741:(B,A,c)=>{c.d(A,{$:()=>m});var b=c(553),y=c(5879),n=c(9862);let m=(()=>{class t{constructor(u){this.http=u,this.isTblLoading=!0,this.urlEndpoint=b.N.patientsEndpoints,this.urlApi=b.N.api,this.urlMedicalRecordEndpoint=b.N.medicalRecordEndpoint}getAllPatients(u){return this.http.get(`${this.urlApi}${this.urlEndpoint}${u}`)}getAllPatientsAdmin(){return this.http.get(`${this.urlApi}${this.urlEndpoint}allPatientsAdm/`)}getPatientById(u){return console.log(u),this.http.get(`${this.urlApi}${this.urlEndpoint}patientById/${u}`)}addPatient(u){return this.http.post(`${this.urlApi}pacientes`,u)}editPatient(u,C){return this.http.put(`${this.urlApi}${this.urlEndpoint}${u}`,C)}disablePatient(u){return this.http.delete(`${this.urlApi}${this.urlEndpoint}${u}`)}getMedicalRecordById(u){return this.http.get(`${this.urlApi}${this.urlMedicalRecordEndpoint}${u}`)}saveMedicalRecord(u){return this.http.post(`${this.urlApi}${this.urlMedicalRecordEndpoint}`,u)}updateMedicalRecord(u,C){return this.http.put(`${this.urlApi}${this.urlMedicalRecordEndpoint}${C}`,u)}static#t=this.\u0275fac=function(C){return new(C||t)(y.LFG(n.eN))};static#e=this.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);