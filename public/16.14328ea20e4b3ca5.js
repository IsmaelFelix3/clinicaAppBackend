"use strict";(self.webpackChunkcliniva=self.webpackChunkcliniva||[]).push([[16],{3016:(ke,T,l)=>{l.r(T),l.d(T,{AccessLogModule:()=>we});var d=l(6814),r=l(6223),N=l(5531),F=l(1858),p=l(1896),y=l(8337),C=l(1476),v=l(3566),m=l(5313),D=l(2589),I=l(2438),Y=l(3519),g=l.n(Y),e=l(5879),x=l(9862),J=l(9347),A=l(553);const _=A.N.api,f=A.N.buildingLogEndpoint;let Z=(()=>{class t{constructor(o){this.http=o}getRecords(){return this.http.get(`${_}${f}getBitadoraRecords`)}getBuildingLogById(o){return this.http.get(`${_}${f}getRecordById/${o}`)}addBuildingLog(o){return this.http.post(`${_}${f}postBitacoraRecord`,o)}editBuildingLog(o){return this.http.post(`${_}${f}editRecord`,o)}deleteBuildingLog(o){return this.http.delete(`${_}${f}deleteRecord/${o}`)}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(x.eN))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Q=l(2939),h=l(2296),w=l(617),L=l(3680),k=l(2596),O=l(9177),b=l(4414);const S=["filter"];function V(t,n){1&t&&e._UZ(0,"mat-header-cell",46),2&t&&e.Q6J("ngClass","tbl-col-width-per-6")}function M(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Tipo"),e.qZA())}function R(t,n){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.Oqu(o.tipo_ingreso)}}function $(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Nombre"),e.qZA())}function j(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Nombre:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.nombre_ingreso," ")}}function P(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Acompa\xf1ante"),e.qZA())}function G(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Acompa\xf1ante:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.nombre_acompanante," ")}}function H(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Motivo"),e.qZA())}function z(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Motivo:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.motivo_ingreso," ")}}function X(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Medico"),e.qZA())}function K(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Medico:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.medico," ")}}function W(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Fecha"),e.qZA())}function ee(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Fecha:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.fecha," ")}}function te(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Entrada"),e.qZA())}function oe(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Entrada:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.hora_entrada," ")}}function ie(t,n){1&t&&(e.TgZ(0,"mat-header-cell",47),e._uU(1,"Salida"),e.qZA())}function ne(t,n){if(1&t&&(e.TgZ(0,"mat-cell")(1,"span",48),e._uU(2,"Salida:"),e.qZA(),e._uU(3),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.hij(" ",o.hora_salida," ")}}function ae(t,n){1&t&&(e.TgZ(0,"mat-header-cell",49),e._uU(1,"Acciones"),e.qZA())}function re(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"mat-cell",49)(1,"button",50),e.NdJ("click",function(i){return i.stopPropagation()})("click",function(){const c=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.editCall(c))}),e._UZ(2,"app-feather-icons",51),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(i){return i.stopPropagation()})("click",function(){const c=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.deleteItem(c))}),e._UZ(4,"app-feather-icons",51),e.qZA()()}2&t&&(e.xp6(2),e.Tol("tbl-fav-edit"),e.Q6J("icon","edit"),e.xp6(2),e.Tol("tbl-fav-delete"),e.Q6J("icon","trash-2"))}function le(t,n){1&t&&e._UZ(0,"mat-header-row")}function ce(t,n){1&t&&e._UZ(0,"mat-row",53),2&t&&e.Udp("cursor","pointer")}const se=function(){return[5,10,25,100]};let B=(()=>{class t extends D.n{constructor(o,a,i,c,s){super(),this.httpClient=o,this.dialog=a,this.buildingLogService=i,this.snackBar=c,this.router=s,this.displayedColumns=["type","name","companion","motive","medic","date","entrance","exit","actions"],this.dataSource=new m.by,this.records=[],this.selection=new y.Ov(!0,[]),this.dataLength=0}ngOnInit(){this.loadData()}refresh(){this.loadData()}addNew(){let o;o="true"===localStorage.getItem("isRtl")?"rtl":"ltr",this.router.navigateByUrl("admin/accessLog/addBuildingLog")}editCall(o){console.log(o),this.router.navigateByUrl("admin/accessLog/editBuildingLog",{state:{id:o.id}})}deleteItem(o){this.id=o.id,console.log(o),g().fire({title:"\xbfDesea eliminar este registro?",text:"No podras revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar"}).then(a=>{a.isConfirmed&&this.buildingLogService.deleteBuildingLog(this.id).subscribe({next:i=>{this.showNotification("snackbar-success","Registro Eliminado Exitosamente...!!!","top","end")},complete:()=>{this.refresh()},error:i=>{g().fire({icon:"error",title:"Error al eliminar el registro",text:i.msg}),this.loadData()}})})}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}loadData(){this.buildingLogService.getRecords().subscribe({complete:()=>{},next:o=>{console.log(o),this.records=o.registros.rows,this.dataSource=new m.by(this.records),this.dataSource.paginator=this.paginator,this.dataLength=this.records.length},error:o=>{}}),this.subs.sink=(0,I.R)(this.filter?.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter?.nativeElement.value)})}showNotification(o,a,i,c){this.snackBar.open(a,"",{duration:2e3,verticalPosition:i,horizontalPosition:c,panelClass:o})}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(x.eN),e.Y36(J.uw),e.Y36(Z),e.Y36(Q.ux),e.Y36(p.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-building-log"]],viewQuery:function(a,i){if(1&a&&(e.Gf(C.NW,7),e.Gf(v.YE,7),e.Gf(S,7)),2&a){let c;e.iGM(c=e.CRH())&&(i.paginator=c.first),e.iGM(c=e.CRH())&&(i.sort=c.first),e.iGM(c=e.CRH())&&(i.filter=c.first)}},features:[e.qOj],decls:68,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","Agregar",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","REFRESH",1,"m-l-10"],[1,"body","overflow-auto"],[1,"responsive_table"],["matSort","",1,"mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","companion"],["matColumnDef","motive"],["matColumnDef","medic"],["matColumnDef","date"],["matColumnDef","entrance"],["matColumnDef","exit"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"ngClass"],["mat-sort-header",""],[1,"mobile-label"],[1,"pr-0"],["matTooltip","Editar","mat-icon-button","",1,"tbl-action-btn",3,"click"],[3,"icon"],["matTooltip","Eliminar","mat-icon-button","",1,"tbl-action-btn",3,"click"],["matRipple",""]],template:function(a,i){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),e._uU(12,"Listado"),e.qZA()(),e.TgZ(13,"li",11)(14,"label",12)(15,"i",13),e._uU(16,"search"),e.qZA()(),e._UZ(17,"input",14,15),e.qZA()()(),e.TgZ(19,"div",16)(20,"ul",17)(21,"li",18)(22,"div",19)(23,"button",20),e.NdJ("click",function(){return i.addNew()}),e.TgZ(24,"mat-icon",21),e._uU(25,"add"),e.qZA()()()(),e.TgZ(26,"li",18)(27,"div",22)(28,"button",20),e.NdJ("click",function(){return i.refresh()}),e.TgZ(29,"mat-icon",21),e._uU(30,"refresh"),e.qZA()()()()()()(),e.TgZ(31,"div",23)(32,"div",24)(33,"mat-table",25,26),e.ynx(35,27),e.YNc(36,V,1,1,"mat-header-cell",28),e.BQk(),e.ynx(37,29),e.YNc(38,M,2,0,"mat-header-cell",30),e.YNc(39,R,2,1,"mat-cell",31),e.BQk(),e.ynx(40,32),e.YNc(41,$,2,0,"mat-header-cell",30),e.YNc(42,j,4,1,"mat-cell",31),e.BQk(),e.ynx(43,33),e.YNc(44,P,2,0,"mat-header-cell",30),e.YNc(45,G,4,1,"mat-cell",31),e.BQk(),e.ynx(46,34),e.YNc(47,H,2,0,"mat-header-cell",30),e.YNc(48,z,4,1,"mat-cell",31),e.BQk(),e.ynx(49,35),e.YNc(50,X,2,0,"mat-header-cell",30),e.YNc(51,K,4,1,"mat-cell",31),e.BQk(),e.ynx(52,36),e.YNc(53,W,2,0,"mat-header-cell",30),e.YNc(54,ee,4,1,"mat-cell",31),e.BQk(),e.ynx(55,37),e.YNc(56,te,2,0,"mat-header-cell",30),e.YNc(57,oe,4,1,"mat-cell",31),e.BQk(),e.ynx(58,38),e.YNc(59,ie,2,0,"mat-header-cell",30),e.YNc(60,ne,4,1,"mat-cell",31),e.BQk(),e.ynx(61,39),e.YNc(62,ae,2,0,"mat-header-cell",40),e.YNc(63,re,5,6,"mat-cell",41),e.BQk(),e.YNc(64,le,1,0,"mat-header-row",42),e.YNc(65,ce,1,2,"mat-row",43),e.qZA(),e._UZ(66,"mat-paginator",44,45),e.qZA()()()()()()()),2&a&&(e.xp6(3),e.Q6J("title","Bitacora")("active_item","Listado"),e.xp6(30),e.Q6J("dataSource",i.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("length",i.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",e.DdM(9,se)))},dependencies:[d.mk,h.RK,h.nh,w.Hw,C.NW,L.wG,v.YE,v.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,k.gM,O.A,b.L]})}return t})();var U=l(8656),u=l(4170),q=l(2032),E=l(8525);function me(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function de(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el tipo de ingreso"))}function ge(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre"))}function ue(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del acompa\xf1ante"))}function pe(t,n){if(1&t&&(e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Acompa\xf1ante"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,ue,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("nombre_acompanante"))}}function _e(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el motivo de ingreso"))}function fe(t,n){if(1&t&&(e.TgZ(0,"div",27)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Motivo"),e.qZA(),e._UZ(4,"input",28),e.YNc(5,_e,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("motivo_ingreso"))}}function he(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id_medico),e.xp6(1),e.hij(" ",o.apellidos+" "+o.nombre," ")}}function ve(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del banco"))}function Ze(t,n){if(1&t&&(e.TgZ(0,"div",29)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Medico"),e.qZA(),e.TgZ(4,"mat-select",30),e.YNc(5,he,2,2,"mat-option",14),e.qZA(),e.YNc(6,ve,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.doctors),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("medico"))}}function Le(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de entrada"))}const be=function(){return[]};function Ce(t,n){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function xe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el tipo de ingreso"))}function Ae(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre"))}function Be(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del acompa\xf1ante"))}function Ue(t,n){if(1&t&&(e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Acompa\xf1ante"),e.qZA(),e._UZ(4,"input",27),e.YNc(5,Be,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("nombre_acompanante"))}}function qe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el motivo de ingreso"))}function Ee(t,n){if(1&t&&(e.TgZ(0,"div",28)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Motivo"),e.qZA(),e._UZ(4,"input",29),e.YNc(5,qe,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.campoEsValido("motivo_ingreso"))}}function Ne(t,n){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id_medico),e.xp6(1),e.hij(" ",o.apellidos+" "+o.nombre," ")}}function Fe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar el nombre del banco"))}function ye(t,n){if(1&t&&(e.TgZ(0,"div",30)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Medico"),e.qZA(),e.TgZ(4,"mat-select",31),e.YNc(5,Ne,2,2,"mat-option",14),e.qZA(),e.YNc(6,Fe,2,1,"mat-error",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.doctors),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("medico"))}}function De(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de entrada"))}function Ie(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Debe ingresar la hora de salida"))}const Ye=function(){return[]},Je=[{path:"buildingLog",component:B},{path:"addBuildingLog",component:(()=>{class t{constructor(o,a,i,c){this.fb=o,this.router=a,this.buildingLogService=i,this.doctorService=c,this.types=["EMPLEADO","PACIENTE"],this.doctors=[],this.isEmpleado=!1,this.accessLogForm=this.fb.group({tipo_ingreso:[,[r.kI.required]],nombre_ingreso:[,[r.kI.required]],nombre_acompanante:[,[r.kI.required]],motivo_ingreso:[,[r.kI.required]],medico:[,[r.kI.required]],fecha:[,r.kI.required],hora_entrada:[,[r.kI.required]],hora_salida:[,[]]})}ngOnInit(){this.doctorService.getAllDoctorss().subscribe(o=>{this.doctors=o.medicos})}campoEsValido(o){return this.accessLogForm.controls[o].errors&&this.accessLogForm.controls[o].touched}getType(){console.log("entro"),console.log(this.accessLogForm.value.tipo_ingreso),this.isEmpleado=!1,"EMPLEADO"===this.accessLogForm.value.tipo_ingreso&&(this.isEmpleado=!0),console.log(this.isEmpleado)}addProcedure(){"EMPLEADO"===this.accessLogForm.get("tipo_ingreso")?.value?(this.accessLogForm.get("nombre_acompanante")?.setValue("N/A"),this.accessLogForm.get("motivo_ingreso")?.setValue("N/A"),this.accessLogForm.get("medico")?.setValue(0)):(this.accessLogForm.get("nombre_acompanante")?.setValue(this.accessLogForm.value.nombre_acompanante.toUpperCase()),this.accessLogForm.get("motivo_ingreso")?.setValue(this.accessLogForm.value.motivo_ingreso.toUpperCase()));const o=(new Date).getUTCDate(),a=(new Date).getUTCMonth(),i=(new Date).getUTCFullYear(),c=new Date(i,a,o).toUTCString();this.accessLogForm.get("nombre_ingreso")?.setValue(this.accessLogForm.value.nombre_ingreso.toUpperCase()),this.accessLogForm.get("fecha")?.setValue(c),console.log(this.accessLogForm.value),this.buildingLogService.addBuildingLog(this.accessLogForm.value).subscribe({complete:()=>{this.router.navigateByUrl("admin/accessLog/buildingLog")},next:s=>{console.log(s),g().fire({icon:"success",title:"Registro se guardo correctamente"})},error:s=>{g().fire({icon:"error",title:"Error al guardar el Registro",text:s.msg})}})}return(){this.router.navigateByUrl("admin/accessLog/buildingLog")}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(r.qu),e.Y36(p.F0),e.Y36(Z),e.Y36(U.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-building-log"]],decls:42,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"mx-4",3,"formGroup"],[1,"row"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","tipo_ingreso","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre_ingreso","required","",1,"uppercase"],["class","col-xl-5 col-lg-5 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-3 col-lg-3 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-4 col-lg-4 col-md-12 col-sm-12",4,"ngIf"],["matInput","","formControlName","hora_entrada","required",""],["mat-raised-button","","color","primary",1,"btn-space",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"],[3,"value"],["matInput","","formControlName","nombre_acompanante","required","",1,"uppercase"],[1,"col-xl-3","col-lg-3","col-md-12","col-sm-12"],["matInput","","formControlName","motivo_ingreso","required","",1,"uppercase"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12"],["formControlName","medico","required",""]],template:function(a,i){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),e._uU(9,"Nuevo registro"),e.qZA()(),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tipo Ingreso"),e.qZA(),e.TgZ(17,"mat-select",13),e.NdJ("selectionChange",function(){return i.getType()}),e.YNc(18,me,2,2,"mat-option",14),e.qZA(),e.YNc(19,de,2,1,"mat-error",15),e.qZA()(),e.TgZ(20,"div",16)(21,"mat-form-field",17)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",18),e.YNc(25,ge,2,1,"mat-error",15),e.qZA()(),e.YNc(26,pe,6,1,"div",19),e.qZA(),e.TgZ(27,"div",10),e.YNc(28,fe,6,1,"div",20),e.YNc(29,Ze,7,2,"div",21),e.TgZ(30,"div",11)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Entrada (Ejemplo: 12:00)"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,Le,2,1,"mat-error",15),e.qZA()()(),e.TgZ(36,"div",10)(37,"div",5)(38,"button",23),e.NdJ("click",function(){return i.addProcedure()}),e._uU(39,"Guardar"),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return i.return()}),e._uU(41,"Cancel"),e.qZA()()()()()()()()()()),2&a&&(e.xp6(3),e.Q6J("title","Bitacora")("items",e.DdM(11,be))("active_item","Nuevo registro"),e.xp6(8),e.Q6J("formGroup",i.accessLogForm),e.xp6(7),e.Q6J("ngForOf",i.types),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("tipo_ingreso")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("nombre_ingreso")),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(2),e.Q6J("ngIf",!i.isEmpleado),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_entrada")))},dependencies:[d.sg,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,L.ey,h.lW,u.KE,u.hX,u.TO,q.Nt,E.gD,b.L]})}return t})()},{path:"editBuildingLog",component:(()=>{class t{constructor(o,a,i,c){this.fb=o,this.router=a,this.buildingLogService=i,this.doctorService=c,this.types=["EMPLEADO","PACIENTE"],this.doctors=[],this.isEmpleado=!1,this.state={},this.id=0,this.accessLogForm=this.fb.group({id:[],tipo_ingreso:[,[r.kI.required]],nombre_ingreso:[,[r.kI.required]],nombre_acompanante:[,[r.kI.required]],motivo_ingreso:[,[r.kI.required]],medico:[,[r.kI.required]],hora_entrada:[,[r.kI.required]],hora_salida:[,[r.kI.required]]}),this.state=this.router.getCurrentNavigation()?.extras.state}ngOnInit(){null!=this.state?(this.id=this.state.id,this.doctorService.getAllDoctorss().subscribe(o=>{this.doctors=o.medicos}),this.buildingLogService.getBuildingLogById(this.id).subscribe(o=>{console.log(o.registro.tipo_ingreso),this.isEmpleado="EMPLEADO"===o.registro.tipo_ingreso,this.accessLogForm.get("id")?.setValue(this.id),this.accessLogForm.get("tipo_ingreso")?.setValue(o.registro.tipo_ingreso),this.accessLogForm.get("nombre_ingreso")?.setValue(o.registro.nombre_ingreso),this.accessLogForm.get("nombre_acompanante")?.setValue(o.registro.nombre_acompanante),this.accessLogForm.get("motivo_ingreso")?.setValue(o.registro.motivo_ingreso),this.accessLogForm.get("medico")?.setValue(o.registro.medico),this.accessLogForm.get("hora_entrada")?.setValue(o.registro.hora_entrada),this.accessLogForm.get("hora_salida")?.setValue(o.registro.hora_salida)})):this.router.navigateByUrl("admin/accessLog/buildingLog")}campoEsValido(o){return this.accessLogForm.controls[o].errors&&this.accessLogForm.controls[o].touched}getType(){this.isEmpleado=!1,"EMPLEADO"===this.accessLogForm.value.tipo_ingreso&&(this.isEmpleado=!0)}addProcedure(){"EMPLEADO"===this.accessLogForm.get("type")?.value?(this.accessLogForm.get("acompanante")?.setValue("N/A"),this.accessLogForm.get("motivo")?.setValue("N/A"),this.accessLogForm.get("medico")?.setValue(0)):(this.accessLogForm.get("acompanante")?.setValue(this.accessLogForm.value.acompanante.toUpperCase()),this.accessLogForm.get("motivo")?.setValue(this.accessLogForm.value.motivo.toUpperCase()));const o=(new Date).getUTCDate(),a=(new Date).getUTCMonth(),i=(new Date).getUTCFullYear(),c=new Date(i,a,o).toUTCString();this.accessLogForm.get("nombre")?.setValue(this.accessLogForm.value.nombre.toUpperCase()),this.accessLogForm.get("fecha")?.setValue(c),console.log(this.accessLogForm.value),this.buildingLogService.editBuildingLog(this.accessLogForm.value).subscribe({complete:()=>{this.router.navigateByUrl("admin/accessLog/buildingLog")},next:s=>{console.log(s),g().fire({icon:"success",title:"Registro se guardo correctamente"})},error:s=>{g().fire({icon:"error",title:"Error al guardar el Registro",text:s.msg})}})}return(){this.router.navigateByUrl("admin/accessLog/buildingLog")}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(r.qu),e.Y36(p.F0),e.Y36(Z),e.Y36(U.e))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-building-log"]],decls:48,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"mx-4",3,"formGroup"],[1,"row"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","tipo_ingreso","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre_ingreso","required","",1,"uppercase"],["class","col-xl-5 col-lg-5 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-3 col-lg-3 col-md-12 col-sm-12",4,"ngIf"],["class","col-xl-4 col-lg-4 col-md-12 col-sm-12",4,"ngIf"],["matInput","","formControlName","hora_entrada","required",""],["matInput","","formControlName","hora_salida","required",""],["mat-raised-button","","color","primary",1,"btn-space",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"],[3,"value"],["matInput","","formControlName","nombre_acompanante","required","",1,"uppercase"],[1,"col-xl-3","col-lg-3","col-md-12","col-sm-12"],["matInput","","formControlName","motivo_ingreso","required","",1,"uppercase"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12"],["formControlName","medico","required",""]],template:function(a,i){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),e._uU(9,"Editar registro"),e.qZA()(),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tipo Ingreso"),e.qZA(),e.TgZ(17,"mat-select",13),e.NdJ("selectionChange",function(){return i.getType()}),e.YNc(18,Ce,2,2,"mat-option",14),e.qZA(),e.YNc(19,xe,2,1,"mat-error",15),e.qZA()(),e.TgZ(20,"div",16)(21,"mat-form-field",17)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",18),e.YNc(25,Ae,2,1,"mat-error",15),e.qZA()(),e.YNc(26,Ue,6,1,"div",19),e.qZA(),e.TgZ(27,"div",10),e.YNc(28,Ee,6,1,"div",20),e.YNc(29,ye,7,2,"div",21),e.TgZ(30,"div",11)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Entrada (Ejemplo: 12:00 AM)"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,De,2,1,"mat-error",15),e.qZA()(),e.TgZ(36,"div",11)(37,"mat-form-field",17)(38,"mat-label"),e._uU(39,"Salida (Ejemplo: 12:00 AM)"),e.qZA(),e._UZ(40,"input",23),e.YNc(41,Ie,2,1,"mat-error",15),e.qZA()()(),e.TgZ(42,"div",10)(43,"div",5)(44,"button",24),e.NdJ("click",function(){return i.addProcedure()}),e._uU(45,"Guardar Cambios"),e.qZA(),e.TgZ(46,"button",25),e.NdJ("click",function(){return i.return()}),e._uU(47,"Cancel"),e.qZA()()()()()()()()()()),2&a&&(e.xp6(3),e.Q6J("title","Bitacora")("items",e.DdM(12,Ye))("active_item","Editar registro"),e.xp6(8),e.Q6J("formGroup",i.accessLogForm),e.xp6(7),e.Q6J("ngForOf",i.types),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("tipo_ingreso")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("nombre_ingreso")),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(2),e.Q6J("ngIf",!i.isEmpleado),e.xp6(1),e.Q6J("ngIf",!i.isEmpleado),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_entrada")),e.xp6(6),e.Q6J("ngIf",i.campoEsValido("hora_salida")))},dependencies:[d.sg,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,L.ey,h.lW,u.KE,u.hX,u.TO,q.Nt,E.gD,b.L]})}return t})()},{path:"**",component:B}];let Qe=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(Je),p.Bz]})}return t})(),we=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[d.ez,N.m,r.u5,r.UX,F.K,Qe]})}return t})()}}]);